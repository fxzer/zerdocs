import{D as P}from"./chunks/DemoWrap.1a5d67bd.js";import{d as g,a5 as w,h as C,o as d,c as b,k as l,a6 as f,a7 as k,l as c,a8 as m,F as L,_ as R,a as _,a9 as T,H as D,w as u,t as V,e as F,D as q,p as j,m as O,Q as E}from"./chunks/framework.fe6e07c1.js";const H=g({__name:"demo1",async setup(y){let a,t;const s=new Blob(["1,2,3"]),r=new File(["1,2,3"],"test.txt",{type:"text/plain"}),i=([a,t]=w(()=>s.arrayBuffer()),a=await a,t(),a);[a,t]=w(()=>r.arrayBuffer()),a=await a,t();const p=new FileReader;p.readAsArrayBuffer(r),p.onload=n=>{var B;console.log("[ e ]-11",(B=n.target)==null?void 0:B.result)},new DataView(i).setUint8(0,4);const o=C(null),e=n=>{o.value=n.target.files};return(n,B)=>(d(),b("input",{type:"file",onChange:e},null,32))}}),I={class:"opt-wrap"},N=g({__name:"FilePicker",setup(y){const a=async e=>{const n={title:"Open File",accept:{"image/*":[".png",".jpg",".jpeg"]}},[B]=await window.showOpenFilePicker(n),S=await B.getFile(),h=new FileReader;h.readAsArrayBuffer(S),h.onload=U=>{var v;console.log("[ e ]-11",(v=U.target)==null?void 0:v.result)}},t={title:"Open File",types:[{description:"Text Files",accept:{"text/plain":[".txt"]}}]},s=C("Hello World"),r=C(null),i=async()=>{const n=await(await window.showSaveFilePicker()).createWritable();await n.write(s.value),await n.close()},p=async()=>{const[e]=await window.showOpenFilePicker(t);r.value=e;const n=await e.getFile();s.value=await n.text()},A=async()=>{if(r.value){const e=await r.value.createWritable();await e.write(s.value),await e.close()}},o=()=>{i()};return(e,n)=>(d(),b(L,null,[l("input",{type:"file",onClick:a}),l("div",I,[f(l("textarea",{name:"",id:"",cols:"30",rows:"10","onUpdate:modelValue":n[0]||(n[0]=B=>m(s)?s.value=B:null)},null,512),[[k,c(s)]]),l("div",{class:"opts"},[l("button",{onClick:i}," 创建"),l("button",{onClick:p}," 打开"),l("button",{onClick:A},"保存 "),l("button",{onClick:o}," 保存为")])])],64))}});const W=R(N,[["__scopeId","data-v-1f7bdb7e"]]),x=y=>(j("data-v-2f3c7841"),y=y(),O(),y),z={class:"opt-wrap"},J=x(()=>l("option",{value:"BLOB"},"BLOB URL",-1)),$=x(()=>l("option",{value:"DATA"},"DATA URL",-1)),M=[J,$],Y={key:0,class:"show-wrap"},Q=["href"],G=["src"],K=["src"],X=g({__name:"DemoUrl",setup(y){const a=C("BLOB"),t=C(""),s=C(""),r=async(i,p)=>{t.value=i;const A=await fetch(p);if(a.value==="BLOB"){const o=await A.blob();s.value=URL.createObjectURL(o)}else{const o=new FileReader;o.onload=e=>{var n;s.value=(n=e.target)==null?void 0:n.result},o.readAsDataURL(await A.blob())}};return(i,p)=>{const A=q("font");return d(),b("div",null,[l("div",z,[_(" URL 类型"),f(l("select",{id:"urltype","onUpdate:modelValue":p[0]||(p[0]=o=>m(a)?a.value=o:null)},M,512),[[T,c(a)]]),l("button",{onClick:p[1]||(p[1]=o=>r("image","./demo/url.png"))},"获取图片 URL"),l("button",{onClick:p[2]||(p[2]=o=>r("text","./demo/url.txt"))},"获取文本 URL")]),f(l("textarea",{"onUpdate:modelValue":p[3]||(p[3]=o=>m(s)?s.value=o:null)},null,512),[[k,c(s)]]),c(s)?(d(),b("div",Y,[l("a",{href:c(s),target:"_blank"}," 链接 ",8,Q),D(A,{color:"urlType=='DATA' ? 'red' :'green'"},{default:u(()=>[_("DATA URL"+V(c(a)=="DATA"?"不":"")+"可直接点击链接打开, 可复制链接打开",1)]),_:1}),c(t)=="image"?(d(),b("img",{key:0,src:c(s),alt:"图片"},null,8,G)):F("",!0),l("iframe",{src:c(s)},null,8,K)])):F("",!0)])}}});const Z=R(X,[["__scopeId","data-v-2f3c7841"]]),ss=E(`<h2 id="文件转换关系图" tabindex="-1">文件转换关系图 <a class="header-anchor" href="#文件转换关系图" aria-label="Permalink to &quot;文件转换关系图&quot;">​</a></h2><p><img src="https://zerdocs.oss-cn-shanghai.aliyuncs.com/problem/202407022106364.svg" alt="" data-zoomable=""></p><h2 id="blob与-file" tabindex="-1">Blob与 File <a class="header-anchor" href="#blob与-file" aria-label="Permalink to &quot;Blob与 File&quot;">​</a></h2><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">blob</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">Blob</span><span style="color:#666666;">([</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">1,2,3</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">])</span></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">file</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">File</span><span style="color:#666666;">([</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">1,2,3</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">],</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">test.txt</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">text/plain</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">})</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">blob</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">Blob</span><span style="color:#999999;">([</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">1,2,3</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">])</span></span>
<span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">file</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">File</span><span style="color:#999999;">([</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">1,2,3</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">],</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">test.txt</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">text/plain</span><span style="color:#B5695999;">&#39;</span><span style="color:#393A34;"> </span><span style="color:#999999;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="arraybuffer" tabindex="-1">ArrayBuffer <a class="header-anchor" href="#arraybuffer" aria-label="Permalink to &quot;ArrayBuffer&quot;">​</a></h2><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">blob</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">Blob</span><span style="color:#666666;">([</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">1,2,3</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">])</span></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">file</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">File</span><span style="color:#666666;">([</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">1,2,3</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">],</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">test.txt</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">text/plain</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">// ArrayBuffer</span></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">blobArrayBuffer</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">await</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">blob</span><span style="color:#666666;">.</span><span style="color:#80A665;">arrayBuffer</span><span style="color:#666666;">()</span></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">fileArrayBuffer</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">await</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">file</span><span style="color:#666666;">.</span><span style="color:#80A665;">arrayBuffer</span><span style="color:#666666;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">[ blobArrayBuffer ]-6</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">blobArrayBuffer</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">[ fileArrayBuffer ]-8</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">fileArrayBuffer</span><span style="color:#666666;">)</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">blob</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">Blob</span><span style="color:#999999;">([</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">1,2,3</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">])</span></span>
<span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">file</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">File</span><span style="color:#999999;">([</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">1,2,3</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">],</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">test.txt</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">text/plain</span><span style="color:#B5695999;">&#39;</span><span style="color:#393A34;"> </span><span style="color:#999999;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">// ArrayBuffer</span></span>
<span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">blobArrayBuffer</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">await</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">blob</span><span style="color:#999999;">.</span><span style="color:#59873A;">arrayBuffer</span><span style="color:#999999;">()</span></span>
<span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">fileArrayBuffer</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">await</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">file</span><span style="color:#999999;">.</span><span style="color:#59873A;">arrayBuffer</span><span style="color:#999999;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">[ blobArrayBuffer ]-6</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">blobArrayBuffer</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">[ fileArrayBuffer ]-8</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">fileArrayBuffer</span><span style="color:#999999;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div>`,6),as=E(`<h2 id="filereader" tabindex="-1">FileReader <a class="header-anchor" href="#filereader" aria-label="Permalink to &quot;FileReader&quot;">​</a></h2><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">fileReader</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">FileReader</span><span style="color:#666666;">()</span></span>
<span class="line"><span style="color:#BD976A;">fileReader</span><span style="color:#666666;">.</span><span style="color:#80A665;">readAsArrayBuffer</span><span style="color:#666666;">(</span><span style="color:#BD976A;">file</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#BD976A;">fileReader</span><span style="color:#666666;">.</span><span style="color:#80A665;">onload</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">e</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">[ e ]-13</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">e</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">[ e.target ]-14</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#BD976A;">target</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">[ e.target.result ]-15</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#BD976A;">target</span><span style="color:#666666;">?.</span><span style="color:#BD976A;">result</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#BD976A;">target</span><span style="color:#666666;">?.</span><span style="color:#BD976A;">result</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">===</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">fileArrayBuffer</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// false</span></span>
<span class="line"><span style="color:#666666;">}</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">fileReader</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">FileReader</span><span style="color:#999999;">()</span></span>
<span class="line"><span style="color:#B07D48;">fileReader</span><span style="color:#999999;">.</span><span style="color:#59873A;">readAsArrayBuffer</span><span style="color:#999999;">(</span><span style="color:#B07D48;">file</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#B07D48;">fileReader</span><span style="color:#999999;">.</span><span style="color:#59873A;">onload</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">e</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">[ e ]-13</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">e</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">[ e.target ]-14</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">e</span><span style="color:#999999;">.</span><span style="color:#B07D48;">target</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">[ e.target.result ]-15</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">e</span><span style="color:#999999;">.</span><span style="color:#B07D48;">target</span><span style="color:#999999;">?.</span><span style="color:#B07D48;">result</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B07D48;">e</span><span style="color:#999999;">.</span><span style="color:#B07D48;">target</span><span style="color:#999999;">?.</span><span style="color:#B07D48;">result</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">===</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">fileArrayBuffer</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// false</span></span>
<span class="line"><span style="color:#999999;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><img src="https://zerdocs.oss-cn-shanghai.aliyuncs.com/febasis/2023-02-11-18-18-03.png" alt="2023-02-11-18-18-03" data-zoomable=""></p><h2 id="dataview" tabindex="-1">DataView <a class="header-anchor" href="#dataview" aria-label="Permalink to &quot;DataView&quot;">​</a></h2><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">dataView</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">DataView</span><span style="color:#666666;">(</span><span style="color:#BD976A;">blobArrayBuffer</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">[ dataView ]-19</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">dataView</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">[ dataView.getUint8(0) ]-20</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">dataView</span><span style="color:#666666;">.</span><span style="color:#80A665;">getUint8</span><span style="color:#666666;">(</span><span style="color:#4C9A91;">0</span><span style="color:#666666;">))</span></span>
<span class="line"><span style="color:#BD976A;">dataView</span><span style="color:#666666;">.</span><span style="color:#80A665;">setUint8</span><span style="color:#666666;">(</span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">4</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">[ dataView.getUint8(0) ]-20</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">dataView</span><span style="color:#666666;">.</span><span style="color:#80A665;">getUint8</span><span style="color:#666666;">(</span><span style="color:#4C9A91;">0</span><span style="color:#666666;">))</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">dataView</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">DataView</span><span style="color:#999999;">(</span><span style="color:#B07D48;">blobArrayBuffer</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">[ dataView ]-19</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">dataView</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">[ dataView.getUint8(0) ]-20</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">dataView</span><span style="color:#999999;">.</span><span style="color:#59873A;">getUint8</span><span style="color:#999999;">(</span><span style="color:#2F798A;">0</span><span style="color:#999999;">))</span></span>
<span class="line"><span style="color:#B07D48;">dataView</span><span style="color:#999999;">.</span><span style="color:#59873A;">setUint8</span><span style="color:#999999;">(</span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">4</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">[ dataView.getUint8(0) ]-20</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">dataView</span><span style="color:#999999;">.</span><span style="color:#59873A;">getUint8</span><span style="color:#999999;">(</span><span style="color:#2F798A;">0</span><span style="color:#999999;">))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="https://zerdocs.oss-cn-shanghai.aliyuncs.com/febasis/2023-02-11-18-25-32.png" alt="2023-02-11-18-25-32" data-zoomable=""></p><h2 id="filepicker" tabindex="-1">FilePicker <a class="header-anchor" href="#filepicker" aria-label="Permalink to &quot;FilePicker&quot;">​</a></h2><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">openFilePicker</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">async</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">e</span><span style="color:#666666;">: </span><span style="color:#5DA994;">any</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">   </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">option</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">     </span><span style="color:#B8A965;">title</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">Open File</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">     </span><span style="color:#B8A965;">accept</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">image/*</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">[</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">.png</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">.jpg</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">.jpeg</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">],</span></span>
<span class="line"><span style="color:#DBD7CAEE;">     </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">   </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">[</span><span style="color:#BD976A;">fileHandle</span><span style="color:#666666;">]</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">await</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">window</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">as</span><span style="color:#DBD7CAEE;"> </span><span style="color:#5DA994;">any</span><span style="color:#666666;">).</span><span style="color:#80A665;">showOpenFilePicker</span><span style="color:#666666;">(</span><span style="color:#BD976A;">option</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">file</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">await</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">fileHandle</span><span style="color:#666666;">.</span><span style="color:#80A665;">getFile</span><span style="color:#666666;">()</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">fileReader</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">FileReader</span><span style="color:#666666;">()</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">fileReader</span><span style="color:#666666;">.</span><span style="color:#80A665;">readAsArrayBuffer</span><span style="color:#666666;">(</span><span style="color:#BD976A;">file</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">fileReader</span><span style="color:#666666;">.</span><span style="color:#80A665;">onload</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">e</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">[ e ]-11</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#BD976A;">target</span><span style="color:#666666;">?.</span><span style="color:#BD976A;">result</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">}</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#59873A;">openFilePicker</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">async</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">e</span><span style="color:#999999;">: </span><span style="color:#2E8F82;">any</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">   </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">option</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">     </span><span style="color:#998418;">title</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">Open File</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">     </span><span style="color:#998418;">accept</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">image/*</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">[</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">.png</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">.jpg</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">.jpeg</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">],</span></span>
<span class="line"><span style="color:#393A34;">     </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">   </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#999999;">[</span><span style="color:#B07D48;">fileHandle</span><span style="color:#999999;">]</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">await</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">window</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">as</span><span style="color:#393A34;"> </span><span style="color:#2E8F82;">any</span><span style="color:#999999;">).</span><span style="color:#59873A;">showOpenFilePicker</span><span style="color:#999999;">(</span><span style="color:#B07D48;">option</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">file</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">await</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">fileHandle</span><span style="color:#999999;">.</span><span style="color:#59873A;">getFile</span><span style="color:#999999;">()</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">fileReader</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">FileReader</span><span style="color:#999999;">()</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">fileReader</span><span style="color:#999999;">.</span><span style="color:#59873A;">readAsArrayBuffer</span><span style="color:#999999;">(</span><span style="color:#B07D48;">file</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">fileReader</span><span style="color:#999999;">.</span><span style="color:#59873A;">onload</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">e</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">[ e ]-11</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">e</span><span style="color:#999999;">.</span><span style="color:#B07D48;">target</span><span style="color:#999999;">?.</span><span style="color:#B07D48;">result</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="文件操作" tabindex="-1">文件操作 <a class="header-anchor" href="#文件操作" aria-label="Permalink to &quot;文件操作&quot;">​</a></h2><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"></span>
<span class="line"><span style="color:#CB7676;">const </span><span style="color:#BD976A;">textarea</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=</span><span style="color:#CB7676;"> </span><span style="color:#80A665;">ref</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">Hello World</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#CB7676;">const </span><span style="color:#BD976A;">fh</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=</span><span style="color:#CB7676;"> </span><span style="color:#80A665;">ref</span><span style="color:#666666;">(</span><span style="color:#CB7676;">null</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#758575DD;">//创建文件</span></span>
<span class="line"><span style="color:#CB7676;">const </span><span style="color:#80A665;">openCreate</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=</span><span style="color:#CB7676;"> async </span><span style="color:#666666;">()</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#CB7676;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#CB7676;">  const  </span><span style="color:#BD976A;">fileHandle</span><span style="color:#CB7676;">  </span><span style="color:#666666;">=</span><span style="color:#CB7676;">  </span><span style="color:#4D9375;">await</span><span style="color:#CB7676;">  </span><span style="color:#666666;">(</span><span style="color:#BD976A;">window</span><span style="color:#CB7676;"> </span><span style="color:#4D9375;">as</span><span style="color:#CB7676;"> </span><span style="color:#5DA994;">any</span><span style="color:#666666;">).</span><span style="color:#80A665;">showSaveFilePicker</span><span style="color:#666666;">()</span></span>
<span class="line"><span style="color:#CB7676;">  const </span><span style="color:#BD976A;">fileSteam</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=</span><span style="color:#CB7676;"> </span><span style="color:#4D9375;">await</span><span style="color:#CB7676;"> </span><span style="color:#BD976A;">fileHandle</span><span style="color:#666666;">.</span><span style="color:#80A665;">createWritable</span><span style="color:#666666;">()</span></span>
<span class="line"><span style="color:#CB7676;">  </span><span style="color:#4D9375;">await</span><span style="color:#CB7676;"> </span><span style="color:#BD976A;">fileSteam</span><span style="color:#666666;">.</span><span style="color:#80A665;">write</span><span style="color:#666666;">(</span><span style="color:#BD976A;">textarea</span><span style="color:#666666;">.</span><span style="color:#BD976A;">value</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#CB7676;">  </span><span style="color:#4D9375;">await</span><span style="color:#CB7676;"> </span><span style="color:#BD976A;">fileSteam</span><span style="color:#666666;">.</span><span style="color:#80A665;">close</span><span style="color:#666666;">()</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#758575DD;">//打开文件</span></span>
<span class="line"><span style="color:#CB7676;">const </span><span style="color:#80A665;">openShow</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=</span><span style="color:#CB7676;"> async </span><span style="color:#666666;">()</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#CB7676;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#CB7676;">  const </span><span style="color:#666666;">[</span><span style="color:#CB7676;"> </span><span style="color:#BD976A;">fileHandle</span><span style="color:#CB7676;"> </span><span style="color:#666666;">]</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=</span><span style="color:#CB7676;">  </span><span style="color:#4D9375;">await</span><span style="color:#CB7676;">  </span><span style="color:#666666;">(</span><span style="color:#BD976A;">window</span><span style="color:#CB7676;"> </span><span style="color:#4D9375;">as</span><span style="color:#CB7676;"> </span><span style="color:#5DA994;">any</span><span style="color:#666666;">).</span><span style="color:#80A665;">showOpenFilePicker</span><span style="color:#666666;">(</span><span style="color:#BD976A;">option</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#CB7676;">  </span><span style="color:#BD976A;">fh</span><span style="color:#666666;">.</span><span style="color:#BD976A;">value</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=</span><span style="color:#CB7676;"> </span><span style="color:#BD976A;">fileHandle</span></span>
<span class="line"><span style="color:#CB7676;">  const </span><span style="color:#BD976A;">file</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=</span><span style="color:#CB7676;">  </span><span style="color:#4D9375;">await</span><span style="color:#CB7676;">  </span><span style="color:#BD976A;">fileHandle</span><span style="color:#666666;">.</span><span style="color:#80A665;">getFile</span><span style="color:#666666;">()</span></span>
<span class="line"><span style="color:#CB7676;">  </span><span style="color:#BD976A;">textarea</span><span style="color:#666666;">.</span><span style="color:#BD976A;">value</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=</span><span style="color:#CB7676;"> </span><span style="color:#4D9375;">await</span><span style="color:#CB7676;"> </span><span style="color:#BD976A;">file</span><span style="color:#666666;">.</span><span style="color:#80A665;">text</span><span style="color:#666666;">()</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#758575DD;">//保存文件</span></span>
<span class="line"><span style="color:#CB7676;">const </span><span style="color:#80A665;">openSave</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=</span><span style="color:#CB7676;"> async </span><span style="color:#666666;">()</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#CB7676;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#CB7676;">  </span><span style="color:#4D9375;">if</span><span style="color:#666666;">(</span><span style="color:#BD976A;">fh</span><span style="color:#666666;">.</span><span style="color:#BD976A;">value</span><span style="color:#666666;">){</span></span>
<span class="line"><span style="color:#CB7676;">    const </span><span style="color:#BD976A;">fileSteam</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=</span><span style="color:#CB7676;"> </span><span style="color:#4D9375;">await</span><span style="color:#CB7676;"> </span><span style="color:#BD976A;">fh</span><span style="color:#666666;">.</span><span style="color:#BD976A;">value</span><span style="color:#666666;">.</span><span style="color:#80A665;">createWritable</span><span style="color:#666666;">()</span></span>
<span class="line"><span style="color:#CB7676;">    </span><span style="color:#4D9375;">await</span><span style="color:#CB7676;"> </span><span style="color:#BD976A;">fileSteam</span><span style="color:#666666;">.</span><span style="color:#80A665;">write</span><span style="color:#666666;">(</span><span style="color:#BD976A;">textarea</span><span style="color:#666666;">.</span><span style="color:#BD976A;">value</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#CB7676;">    </span><span style="color:#4D9375;">await</span><span style="color:#CB7676;"> </span><span style="color:#BD976A;">fileSteam</span><span style="color:#666666;">.</span><span style="color:#80A665;">close</span><span style="color:#666666;">()</span></span>
<span class="line"><span style="color:#CB7676;">  </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#758575DD;">//保存为文件</span></span>
<span class="line"><span style="color:#CB7676;">const </span><span style="color:#80A665;">openSaveAs</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=</span><span style="color:#CB7676;"> </span><span style="color:#666666;">()</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#CB7676;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#CB7676;">  </span><span style="color:#80A665;">openCreate</span><span style="color:#666666;">()</span></span>
<span class="line"><span style="color:#666666;">}</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"></span>
<span class="line"><span style="color:#AB5959;">const </span><span style="color:#B07D48;">textarea</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=</span><span style="color:#AB5959;"> </span><span style="color:#59873A;">ref</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">Hello World</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#AB5959;">const </span><span style="color:#B07D48;">fh</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=</span><span style="color:#AB5959;"> </span><span style="color:#59873A;">ref</span><span style="color:#999999;">(</span><span style="color:#AB5959;">null</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#A0ADA0;">//创建文件</span></span>
<span class="line"><span style="color:#AB5959;">const </span><span style="color:#59873A;">openCreate</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=</span><span style="color:#AB5959;"> async </span><span style="color:#999999;">()</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#AB5959;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#AB5959;">  const  </span><span style="color:#B07D48;">fileHandle</span><span style="color:#AB5959;">  </span><span style="color:#999999;">=</span><span style="color:#AB5959;">  </span><span style="color:#1E754F;">await</span><span style="color:#AB5959;">  </span><span style="color:#999999;">(</span><span style="color:#B07D48;">window</span><span style="color:#AB5959;"> </span><span style="color:#1E754F;">as</span><span style="color:#AB5959;"> </span><span style="color:#2E8F82;">any</span><span style="color:#999999;">).</span><span style="color:#59873A;">showSaveFilePicker</span><span style="color:#999999;">()</span></span>
<span class="line"><span style="color:#AB5959;">  const </span><span style="color:#B07D48;">fileSteam</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=</span><span style="color:#AB5959;"> </span><span style="color:#1E754F;">await</span><span style="color:#AB5959;"> </span><span style="color:#B07D48;">fileHandle</span><span style="color:#999999;">.</span><span style="color:#59873A;">createWritable</span><span style="color:#999999;">()</span></span>
<span class="line"><span style="color:#AB5959;">  </span><span style="color:#1E754F;">await</span><span style="color:#AB5959;"> </span><span style="color:#B07D48;">fileSteam</span><span style="color:#999999;">.</span><span style="color:#59873A;">write</span><span style="color:#999999;">(</span><span style="color:#B07D48;">textarea</span><span style="color:#999999;">.</span><span style="color:#B07D48;">value</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#AB5959;">  </span><span style="color:#1E754F;">await</span><span style="color:#AB5959;"> </span><span style="color:#B07D48;">fileSteam</span><span style="color:#999999;">.</span><span style="color:#59873A;">close</span><span style="color:#999999;">()</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#A0ADA0;">//打开文件</span></span>
<span class="line"><span style="color:#AB5959;">const </span><span style="color:#59873A;">openShow</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=</span><span style="color:#AB5959;"> async </span><span style="color:#999999;">()</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#AB5959;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#AB5959;">  const </span><span style="color:#999999;">[</span><span style="color:#AB5959;"> </span><span style="color:#B07D48;">fileHandle</span><span style="color:#AB5959;"> </span><span style="color:#999999;">]</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=</span><span style="color:#AB5959;">  </span><span style="color:#1E754F;">await</span><span style="color:#AB5959;">  </span><span style="color:#999999;">(</span><span style="color:#B07D48;">window</span><span style="color:#AB5959;"> </span><span style="color:#1E754F;">as</span><span style="color:#AB5959;"> </span><span style="color:#2E8F82;">any</span><span style="color:#999999;">).</span><span style="color:#59873A;">showOpenFilePicker</span><span style="color:#999999;">(</span><span style="color:#B07D48;">option</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#AB5959;">  </span><span style="color:#B07D48;">fh</span><span style="color:#999999;">.</span><span style="color:#B07D48;">value</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=</span><span style="color:#AB5959;"> </span><span style="color:#B07D48;">fileHandle</span></span>
<span class="line"><span style="color:#AB5959;">  const </span><span style="color:#B07D48;">file</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=</span><span style="color:#AB5959;">  </span><span style="color:#1E754F;">await</span><span style="color:#AB5959;">  </span><span style="color:#B07D48;">fileHandle</span><span style="color:#999999;">.</span><span style="color:#59873A;">getFile</span><span style="color:#999999;">()</span></span>
<span class="line"><span style="color:#AB5959;">  </span><span style="color:#B07D48;">textarea</span><span style="color:#999999;">.</span><span style="color:#B07D48;">value</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=</span><span style="color:#AB5959;"> </span><span style="color:#1E754F;">await</span><span style="color:#AB5959;"> </span><span style="color:#B07D48;">file</span><span style="color:#999999;">.</span><span style="color:#59873A;">text</span><span style="color:#999999;">()</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#A0ADA0;">//保存文件</span></span>
<span class="line"><span style="color:#AB5959;">const </span><span style="color:#59873A;">openSave</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=</span><span style="color:#AB5959;"> async </span><span style="color:#999999;">()</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#AB5959;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#AB5959;">  </span><span style="color:#1E754F;">if</span><span style="color:#999999;">(</span><span style="color:#B07D48;">fh</span><span style="color:#999999;">.</span><span style="color:#B07D48;">value</span><span style="color:#999999;">){</span></span>
<span class="line"><span style="color:#AB5959;">    const </span><span style="color:#B07D48;">fileSteam</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=</span><span style="color:#AB5959;"> </span><span style="color:#1E754F;">await</span><span style="color:#AB5959;"> </span><span style="color:#B07D48;">fh</span><span style="color:#999999;">.</span><span style="color:#B07D48;">value</span><span style="color:#999999;">.</span><span style="color:#59873A;">createWritable</span><span style="color:#999999;">()</span></span>
<span class="line"><span style="color:#AB5959;">    </span><span style="color:#1E754F;">await</span><span style="color:#AB5959;"> </span><span style="color:#B07D48;">fileSteam</span><span style="color:#999999;">.</span><span style="color:#59873A;">write</span><span style="color:#999999;">(</span><span style="color:#B07D48;">textarea</span><span style="color:#999999;">.</span><span style="color:#B07D48;">value</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#AB5959;">    </span><span style="color:#1E754F;">await</span><span style="color:#AB5959;"> </span><span style="color:#B07D48;">fileSteam</span><span style="color:#999999;">.</span><span style="color:#59873A;">close</span><span style="color:#999999;">()</span></span>
<span class="line"><span style="color:#AB5959;">  </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#A0ADA0;">//保存为文件</span></span>
<span class="line"><span style="color:#AB5959;">const </span><span style="color:#59873A;">openSaveAs</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=</span><span style="color:#AB5959;"> </span><span style="color:#999999;">()</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#AB5959;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#AB5959;">  </span><span style="color:#59873A;">openCreate</span><span style="color:#999999;">()</span></span>
<span class="line"><span style="color:#999999;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p><strong>filepicker</strong></p>`,11),ns=E(`<h2 id="url" tabindex="-1">URL <a class="header-anchor" href="#url" aria-label="Permalink to &quot;URL&quot;">​</a></h2><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#758575DD;">// Blob URL</span></span>
<span class="line"><span style="color:#BD976A;">URL</span><span style="color:#666666;">.</span><span style="color:#80A665;">createObjectURL</span><span style="color:#666666;">(</span><span style="color:#BD976A;">blob</span><span style="color:#666666;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">// Data  URL</span></span>
<span class="line"><span style="color:#BD976A;">FileReader</span><span style="color:#666666;">.</span><span style="color:#80A665;">readAsDataURL</span><span style="color:#666666;">(</span><span style="color:#BD976A;">file</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#BD976A;">canvas</span><span style="color:#666666;">.</span><span style="color:#80A665;">toDataURL</span><span style="color:#666666;">()</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// Blob URL</span></span>
<span class="line"><span style="color:#B07D48;">URL</span><span style="color:#999999;">.</span><span style="color:#59873A;">createObjectURL</span><span style="color:#999999;">(</span><span style="color:#B07D48;">blob</span><span style="color:#999999;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">// Data  URL</span></span>
<span class="line"><span style="color:#B07D48;">FileReader</span><span style="color:#999999;">.</span><span style="color:#59873A;">readAsDataURL</span><span style="color:#999999;">(</span><span style="color:#B07D48;">file</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#B07D48;">canvas</span><span style="color:#999999;">.</span><span style="color:#59873A;">toDataURL</span><span style="color:#999999;">()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-vue vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">a</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">:</span><span style="color:#80A665;">href</span><span style="color:#666666;">=</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#BD976A;">url</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;">   </span><span style="color:#666666;">&lt;/</span><span style="color:#4D9375;">a</span><span style="color:#666666;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">img</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">:</span><span style="color:#80A665;">src</span><span style="color:#666666;">=</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#BD976A;">url</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">iframe</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">:</span><span style="color:#80A665;">src</span><span style="color:#666666;">=</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#BD976A;">url</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">&gt;&lt;/</span><span style="color:#4D9375;">iframe</span><span style="color:#666666;">&gt;</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">a</span><span style="color:#393A34;"> </span><span style="color:#999999;">:</span><span style="color:#59873A;">href</span><span style="color:#999999;">=</span><span style="color:#B5695999;">&quot;</span><span style="color:#B07D48;">url</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">&gt;</span><span style="color:#393A34;">   </span><span style="color:#999999;">&lt;/</span><span style="color:#1E754F;">a</span><span style="color:#999999;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">img</span><span style="color:#393A34;"> </span><span style="color:#999999;">:</span><span style="color:#59873A;">src</span><span style="color:#999999;">=</span><span style="color:#B5695999;">&quot;</span><span style="color:#B07D48;">url</span><span style="color:#B5695999;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#999999;">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">&lt;</span><span style="color:#1E754F;">iframe</span><span style="color:#393A34;"> </span><span style="color:#999999;">:</span><span style="color:#59873A;">src</span><span style="color:#999999;">=</span><span style="color:#B5695999;">&quot;</span><span style="color:#B07D48;">url</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">&gt;&lt;/</span><span style="color:#1E754F;">iframe</span><span style="color:#999999;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#CB7676;">type</span><span style="color:#DBD7CAEE;"> </span><span style="color:#5DA994;">TYPE</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">text</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">|</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">image</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">|</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;&#39;</span></span>
<span class="line"><span style="color:#CB7676;">const </span><span style="color:#BD976A;">url</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=</span><span style="color:#CB7676;"> </span><span style="color:#80A665;">ref</span><span style="color:#666666;">&lt;</span><span style="color:#5DA994;">string</span><span style="color:#666666;">&gt;(</span><span style="color:#C98A7D99;">&#39;&#39;</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#CB7676;">const </span><span style="color:#80A665;">onFetch</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=</span><span style="color:#CB7676;"> async </span><span style="color:#666666;">(</span><span style="color:#BD976A;">type</span><span style="color:#666666;">: </span><span style="color:#5DA994;">TYPE</span><span style="color:#666666;">,</span><span style="color:#CB7676;"> </span><span style="color:#BD976A;">path</span><span style="color:#666666;">: </span><span style="color:#5DA994;">string</span><span style="color:#666666;">)</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#CB7676;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#CB7676;">  const </span><span style="color:#BD976A;">response</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=</span><span style="color:#CB7676;"> </span><span style="color:#4D9375;">await</span><span style="color:#CB7676;"> </span><span style="color:#80A665;">fetch</span><span style="color:#666666;">(</span><span style="color:#BD976A;">path</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//BLOB URL</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">// const data = await response.blob()</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">// url.value = URL.createObjectURL(data)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//Data URL</span></span>
<span class="line"><span style="color:#CB7676;">  const </span><span style="color:#BD976A;">fr</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=</span><span style="color:#CB7676;"> new </span><span style="color:#80A665;">FileReader</span><span style="color:#666666;">()</span></span>
<span class="line"><span style="color:#CB7676;">  </span><span style="color:#BD976A;">fr</span><span style="color:#666666;">.</span><span style="color:#80A665;">onload</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=</span><span style="color:#CB7676;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">e</span><span style="color:#666666;">)</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#CB7676;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#CB7676;">    </span><span style="color:#BD976A;">url</span><span style="color:#666666;">.</span><span style="color:#BD976A;">value</span><span style="color:#CB7676;"> </span><span style="color:#666666;">=</span><span style="color:#CB7676;"> </span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#BD976A;">target</span><span style="color:#666666;">?.</span><span style="color:#BD976A;">result</span><span style="color:#CB7676;"> </span><span style="color:#4D9375;">as</span><span style="color:#CB7676;"> </span><span style="color:#5DA994;">string</span></span>
<span class="line"><span style="color:#CB7676;">  </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#CB7676;">  </span><span style="color:#BD976A;">fr</span><span style="color:#666666;">.</span><span style="color:#80A665;">readAsDataURL</span><span style="color:#666666;">(</span><span style="color:#4D9375;">await</span><span style="color:#CB7676;"> </span><span style="color:#BD976A;">response</span><span style="color:#666666;">.</span><span style="color:#80A665;">blob</span><span style="color:#666666;">())</span></span>
<span class="line"><span style="color:#666666;">}</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#AB5959;">type</span><span style="color:#393A34;"> </span><span style="color:#2E8F82;">TYPE</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">text</span><span style="color:#B5695999;">&#39;</span><span style="color:#393A34;"> </span><span style="color:#999999;">|</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">image</span><span style="color:#B5695999;">&#39;</span><span style="color:#393A34;"> </span><span style="color:#999999;">|</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;&#39;</span></span>
<span class="line"><span style="color:#AB5959;">const </span><span style="color:#B07D48;">url</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=</span><span style="color:#AB5959;"> </span><span style="color:#59873A;">ref</span><span style="color:#999999;">&lt;</span><span style="color:#2E8F82;">string</span><span style="color:#999999;">&gt;(</span><span style="color:#B5695999;">&#39;&#39;</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#AB5959;">const </span><span style="color:#59873A;">onFetch</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=</span><span style="color:#AB5959;"> async </span><span style="color:#999999;">(</span><span style="color:#B07D48;">type</span><span style="color:#999999;">: </span><span style="color:#2E8F82;">TYPE</span><span style="color:#999999;">,</span><span style="color:#AB5959;"> </span><span style="color:#B07D48;">path</span><span style="color:#999999;">: </span><span style="color:#2E8F82;">string</span><span style="color:#999999;">)</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#AB5959;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#AB5959;">  const </span><span style="color:#B07D48;">response</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=</span><span style="color:#AB5959;"> </span><span style="color:#1E754F;">await</span><span style="color:#AB5959;"> </span><span style="color:#59873A;">fetch</span><span style="color:#999999;">(</span><span style="color:#B07D48;">path</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//BLOB URL</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// const data = await response.blob()</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// url.value = URL.createObjectURL(data)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//Data URL</span></span>
<span class="line"><span style="color:#AB5959;">  const </span><span style="color:#B07D48;">fr</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=</span><span style="color:#AB5959;"> new </span><span style="color:#59873A;">FileReader</span><span style="color:#999999;">()</span></span>
<span class="line"><span style="color:#AB5959;">  </span><span style="color:#B07D48;">fr</span><span style="color:#999999;">.</span><span style="color:#59873A;">onload</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=</span><span style="color:#AB5959;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">e</span><span style="color:#999999;">)</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#AB5959;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#AB5959;">    </span><span style="color:#B07D48;">url</span><span style="color:#999999;">.</span><span style="color:#B07D48;">value</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=</span><span style="color:#AB5959;"> </span><span style="color:#B07D48;">e</span><span style="color:#999999;">.</span><span style="color:#B07D48;">target</span><span style="color:#999999;">?.</span><span style="color:#B07D48;">result</span><span style="color:#AB5959;"> </span><span style="color:#1E754F;">as</span><span style="color:#AB5959;"> </span><span style="color:#2E8F82;">string</span></span>
<span class="line"><span style="color:#AB5959;">  </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#AB5959;">  </span><span style="color:#B07D48;">fr</span><span style="color:#999999;">.</span><span style="color:#59873A;">readAsDataURL</span><span style="color:#999999;">(</span><span style="color:#1E754F;">await</span><span style="color:#AB5959;"> </span><span style="color:#B07D48;">response</span><span style="color:#999999;">.</span><span style="color:#59873A;">blob</span><span style="color:#999999;">())</span></span>
<span class="line"><span style="color:#999999;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div>`,4),ls=E('<h2 id="参考资料" tabindex="-1">参考资料 <a class="header-anchor" href="#参考资料" aria-label="Permalink to &quot;参考资料&quot;">​</a></h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Blob" target="_blank" rel="noreferrer">MDN Blob API 参考</a><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/File" target="_blank" rel="noreferrer">MDN File API 参考</a><br><a href="https://zhuanlan.zhihu.com/p/568915443" target="_blank" rel="noreferrer">谈谈JS二进制：File、Blob、FileReader、ArrayBuffer、Base64</a></p>',2),ts=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"FrontEnd/JavaScript/文件系统.md","filePath":"FrontEnd/JavaScript/文件系统.md"}'),ps={name:"FrontEnd/JavaScript/文件系统.md"},rs=Object.assign(ps,{setup(y){return(a,t)=>{const s=P;return d(),b("div",null,[ss,D(s,{pkg:"FrontEnd/JavaScript/demo",path:"demo1.vue"},{default:u(()=>[D(H)]),_:1}),as,D(s,{pkg:"FrontEnd/JavaScript/demo",path:"FilePicker.vue"},{default:u(()=>[D(W)]),_:1}),ns,D(s,{pkg:"FrontEnd/JavaScript/demo",path:"DemoUrl.vue"},{default:u(()=>[D(Z)]),_:1}),ls])}}});export{ts as __pageData,rs as default};
