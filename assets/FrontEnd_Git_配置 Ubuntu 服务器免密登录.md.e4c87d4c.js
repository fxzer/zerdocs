import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.fe6e07c1.js";const b=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"FrontEnd/Git/配置 Ubuntu 服务器免密登录.md","filePath":"FrontEnd/Git/配置 Ubuntu 服务器免密登录.md"}'),e={name:"FrontEnd/Git/配置 Ubuntu 服务器免密登录.md"},p=l(`<h2 id="_1-生成公钥和私钥" tabindex="-1">1.生成公钥和私钥 <a class="header-anchor" href="#_1-生成公钥和私钥" aria-label="Permalink to &quot;1.生成公钥和私钥&quot;">​</a></h2><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#B8A965;">cd</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">~/.ssh</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># 进入.ssh目录</span></span>
<span class="line"><span style="color:#80A665;">ssh-keygen</span></span>
<span class="line"><span style="color:#758575DD;"># 第一步输入生成的公、私钥文件名，例如：aws-root</span></span>
<span class="line"><span style="color:#758575DD;"># 密码不用填 直接回车</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#998418;">cd</span><span style="color:#393A34;"> </span><span style="color:#B56959;">~/.ssh</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># 进入.ssh目录</span></span>
<span class="line"><span style="color:#59873A;">ssh-keygen</span></span>
<span class="line"><span style="color:#A0ADA0;"># 第一步输入生成的公、私钥文件名，例如：aws-root</span></span>
<span class="line"><span style="color:#A0ADA0;"># 密码不用填 直接回车</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_2-将公钥拷贝到服务器" tabindex="-1">2.将公钥拷贝到服务器 <a class="header-anchor" href="#_2-将公钥拷贝到服务器" aria-label="Permalink to &quot;2.将公钥拷贝到服务器&quot;">​</a></h2><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">ssh-copy-id</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">-i</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">公钥</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">服务器ip</span></span>
<span class="line"><span style="color:#758575DD;"># ssh-copy-id -i aws-root.pub 192.227.112.172</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">ssh-copy-id</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">-i</span><span style="color:#393A34;"> </span><span style="color:#B56959;">公钥</span><span style="color:#393A34;"> </span><span style="color:#B56959;">服务器ip</span></span>
<span class="line"><span style="color:#A0ADA0;"># ssh-copy-id -i aws-root.pub 192.227.112.172</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_3-查看服务器是否配置成功" tabindex="-1">3.查看服务器是否配置成功 <a class="header-anchor" href="#_3-查看服务器是否配置成功" aria-label="Permalink to &quot;3.查看服务器是否配置成功&quot;">​</a></h2><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">ssh</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">root@192.227.112.172</span></span>
<span class="line"><span style="color:#B8A965;">cd</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">~/.ssh</span></span>
<span class="line"><span style="color:#80A665;">cat</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">authorized_keys</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># 查看是否有上传的公钥</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">ssh</span><span style="color:#393A34;"> </span><span style="color:#B56959;">root@192.227.112.172</span></span>
<span class="line"><span style="color:#998418;">cd</span><span style="color:#393A34;"> </span><span style="color:#B56959;">~/.ssh</span></span>
<span class="line"><span style="color:#59873A;">cat</span><span style="color:#393A34;"> </span><span style="color:#B56959;">authorized_keys</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># 查看是否有上传的公钥</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_4-配置-ssh-config文件" tabindex="-1">4.配置 ssh config文件 <a class="header-anchor" href="#_4-配置-ssh-config文件" aria-label="Permalink to &quot;4.配置 ssh config文件&quot;">​</a></h2><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">vim</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">/etc/ssh/sshd_config</span></span>
<span class="line"><span style="color:#80A665;">PermitRootLogin</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">yes</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># no改为yes  # 允许root用户登录：解决root用户登录报错 Permission denied 问题</span></span>
<span class="line"><span style="color:#80A665;">PubkeyAuthentication</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">yes</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># no改为yes</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;"># 重启ssh服务</span></span>
<span class="line"><span style="color:#80A665;">systemctl</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">restart</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">sshd.service</span></span>
<span class="line"><span style="color:#758575DD;">#或： service sshd restart</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">vim</span><span style="color:#393A34;"> </span><span style="color:#B56959;">/etc/ssh/sshd_config</span></span>
<span class="line"><span style="color:#59873A;">PermitRootLogin</span><span style="color:#393A34;"> </span><span style="color:#B56959;">yes</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># no改为yes  # 允许root用户登录：解决root用户登录报错 Permission denied 问题</span></span>
<span class="line"><span style="color:#59873A;">PubkeyAuthentication</span><span style="color:#393A34;"> </span><span style="color:#B56959;">yes</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># no改为yes</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;"># 重启ssh服务</span></span>
<span class="line"><span style="color:#59873A;">systemctl</span><span style="color:#393A34;"> </span><span style="color:#B56959;">restart</span><span style="color:#393A34;"> </span><span style="color:#B56959;">sshd.service</span></span>
<span class="line"><span style="color:#A0ADA0;">#或： service sshd restart</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_5-测试连接、配置本地ssh-config文件-使用-vscode插件-remote-ssh-连接" tabindex="-1">5.测试连接、配置本地ssh config文件，使用 VSCODE插件 (<a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-ssh" target="_blank" rel="noreferrer">Remote - SSH</a>) 连接 <a class="header-anchor" href="#_5-测试连接、配置本地ssh-config文件-使用-vscode插件-remote-ssh-连接" aria-label="Permalink to &quot;5.测试连接、配置本地ssh config文件，使用 VSCODE插件 ([Remote - SSH](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-ssh)) 连接&quot;">​</a></h2><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#758575DD;"># 测试连接</span></span>
<span class="line"><span style="color:#80A665;">ssh</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">-i</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">~/.ssh/aws-root</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">root@192.227.112.172</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">#连接成功后，退出服务器，打开并配置本地ssh config文件</span></span>
<span class="line"><span style="color:#80A665;">vim</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">~/.ssh/config</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;"># 添加以下内容</span></span>
<span class="line"><span style="color:#80A665;">Host</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">192.227</span><span style="color:#C98A7D;">.112.172</span></span>
<span class="line"><span style="color:#80A665;">HostName</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">192.227</span><span style="color:#C98A7D;">.112.172</span></span>
<span class="line"><span style="color:#80A665;">User</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">root</span></span>
<span class="line"><span style="color:#80A665;">IdentityFile</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">~/.ssh/aws-root</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># 测试连接</span></span>
<span class="line"><span style="color:#59873A;">ssh</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">-i</span><span style="color:#393A34;"> </span><span style="color:#B56959;">~/.ssh/aws-root</span><span style="color:#393A34;"> </span><span style="color:#B56959;">root@192.227.112.172</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">#连接成功后，退出服务器，打开并配置本地ssh config文件</span></span>
<span class="line"><span style="color:#59873A;">vim</span><span style="color:#393A34;"> </span><span style="color:#B56959;">~/.ssh/config</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;"># 添加以下内容</span></span>
<span class="line"><span style="color:#59873A;">Host</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">192.227</span><span style="color:#B56959;">.112.172</span></span>
<span class="line"><span style="color:#59873A;">HostName</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">192.227</span><span style="color:#B56959;">.112.172</span></span>
<span class="line"><span style="color:#59873A;">User</span><span style="color:#393A34;"> </span><span style="color:#B56959;">root</span></span>
<span class="line"><span style="color:#59873A;">IdentityFile</span><span style="color:#393A34;"> </span><span style="color:#B56959;">~/.ssh/aws-root</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_6-大功告成-可以每次轻松愉快一键连接远程服务器啦" tabindex="-1">6.大功告成，可以每次轻松愉快一键连接远程服务器啦！ <a class="header-anchor" href="#_6-大功告成-可以每次轻松愉快一键连接远程服务器啦" aria-label="Permalink to &quot;6.大功告成，可以每次轻松愉快一键连接远程服务器啦！&quot;">​</a></h2><blockquote><p>注意：若同时安装了 Remote Repositories 和 Remote - SSH 插件，需要在最顶部进行选择切换到 Remote - SSH 插件，并点击顶部刷新按钮，这样才能看到 ssh/config 文件配置的所有主机。</p></blockquote>`,12),o=[p];function c(r,t,i,y,d,A){return a(),n("div",null,o)}const D=s(e,[["render",c]]);export{b as __pageData,D as default};
