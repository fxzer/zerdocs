import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.dfc91c2c.js";const E=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"BackEnd/NodeJS/MongoDB笔记.md","filePath":"BackEnd/NodeJS/MongoDB笔记.md"}'),p={name:"BackEnd/NodeJS/MongoDB笔记.md"},o=l(`<h2 id="一、相关概念" tabindex="-1">一、相关概念 <a class="header-anchor" href="#一、相关概念" aria-label="Permalink to &quot;一、相关概念&quot;">​</a></h2><p><strong>MongoDB是文档型的NoSQL数据库</strong>。</p><p><img src="https://vnote-bucket.oss-cn-shanghai.aliyuncs.com/image-20220508194905648.png" alt="image-20220508194905648"></p><p><img src="https://vnote-bucket.oss-cn-shanghai.aliyuncs.com/image-20220507220553150.png" alt="image-20220507220553150"></p><p><strong>优点</strong>：</p><ol><li><p>高性能</p></li><li><p>高可用性</p></li><li><p>可扩展分片集群</p></li></ol><p><strong>应用场景</strong>：（数据量大、读写操作频繁、对事务要求不高）</p><h2 id="二、数据库操作" tabindex="-1">二、数据库操作 <a class="header-anchor" href="#二、数据库操作" aria-label="Permalink to &quot;二、数据库操作&quot;">​</a></h2><p><strong>查看所有数据库</strong></p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">show</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">databases</span></span>
<span class="line"><span style="color:#80A665;">show</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">dbs</span></span>
<span class="line"><span style="color:#758575DD;">#连接数据库后默认在test库</span></span>
<span class="line"><span style="color:#80A665;">use</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">testdb01</span><span style="color:#DBD7CAEE;">   </span><span style="color:#758575DD;">#切换数据库</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">show</span><span style="color:#393A34;"> </span><span style="color:#B56959;">databases</span></span>
<span class="line"><span style="color:#59873A;">show</span><span style="color:#393A34;"> </span><span style="color:#B56959;">dbs</span></span>
<span class="line"><span style="color:#A0ADA0;">#连接数据库后默认在test库</span></span>
<span class="line"><span style="color:#59873A;">use</span><span style="color:#393A34;"> </span><span style="color:#B56959;">testdb01</span><span style="color:#393A34;">   </span><span style="color:#A0ADA0;">#切换数据库</span></span></code></pre></div><p><img src="https://vnote-bucket.oss-cn-shanghai.aliyuncs.com/image-20220507215028603.png" alt="image-20220507215028603"></p><p><strong>创建/删除数据库</strong></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">use</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">数据库名</span><span style="color:#DBD7CAEE;">   </span><span style="color:#758575DD;"># use testdb01</span></span>
<span class="line"><span style="color:#80A665;">db</span><span style="color:#DBD7CAEE;">   </span><span style="color:#758575DD;">#查看所在数据库</span></span>
<span class="line"><span style="color:#80A665;">db.dropDatabase</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;">   #删除当前所在库</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">use</span><span style="color:#393A34;"> </span><span style="color:#B56959;">数据库名</span><span style="color:#393A34;">   </span><span style="color:#A0ADA0;"># use testdb01</span></span>
<span class="line"><span style="color:#59873A;">db</span><span style="color:#393A34;">   </span><span style="color:#A0ADA0;">#查看所在数据库</span></span>
<span class="line"><span style="color:#59873A;">db.dropDatabase</span><span style="color:#999999;">()</span><span style="color:#393A34;">   #删除当前所在库</span></span></code></pre></div><h2 id="三、集合相关操作" tabindex="-1">三、集合相关操作 <a class="header-anchor" href="#三、集合相关操作" aria-label="Permalink to &quot;三、集合相关操作&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">show</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">collections</span><span style="color:#666666;">;</span><span style="color:#DBD7CAEE;">   </span><span style="color:#758575DD;"># 查看数据库集合  show tables;</span></span>
<span class="line"><span style="color:#80A665;">db.createCollection(</span><span style="color:#80A665;">&#39;collectionName&#39;</span><span style="color:#80A665;">,[option]</span><span style="color:#DBD7CAEE;">)</span><span style="color:#666666;">;</span><span style="color:#DBD7CAEE;">   </span><span style="color:#758575DD;">#显式创建集合</span></span>
<span class="line"><span style="color:#80A665;">db.users.insert(</span><span style="color:#DBD7CAEE;">{&#39;</span><span style="color:#80A665;">name</span><span style="color:#80A665;">&#39;:&#39;</span><span style="color:#80A665;">李四</span><span style="color:#80A665;">&#39;});   #隐式创建集合 往不存在的集合插入数据</span></span>
<span class="line"><span style="color:#80A665;">db.users.drop();   #删除集合</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">show</span><span style="color:#393A34;"> </span><span style="color:#B56959;">collections</span><span style="color:#999999;">;</span><span style="color:#393A34;">   </span><span style="color:#A0ADA0;"># 查看数据库集合  show tables;</span></span>
<span class="line"><span style="color:#59873A;">db.createCollection(</span><span style="color:#59873A;">&#39;collectionName&#39;</span><span style="color:#59873A;">,[option]</span><span style="color:#393A34;">)</span><span style="color:#999999;">;</span><span style="color:#393A34;">   </span><span style="color:#A0ADA0;">#显式创建集合</span></span>
<span class="line"><span style="color:#59873A;">db.users.insert(</span><span style="color:#393A34;">{&#39;</span><span style="color:#59873A;">name</span><span style="color:#59873A;">&#39;:&#39;</span><span style="color:#59873A;">李四</span><span style="color:#59873A;">&#39;});   #隐式创建集合 往不存在的集合插入数据</span></span>
<span class="line"><span style="color:#59873A;">db.users.drop();   #删除集合</span></span></code></pre></div><h2 id="四、文档相关操作" tabindex="-1">四、文档相关操作 <a class="header-anchor" href="#四、文档相关操作" aria-label="Permalink to &quot;四、文档相关操作&quot;">​</a></h2><h3 id="_1-查询" tabindex="-1">1.查询 <a class="header-anchor" href="#_1-查询" aria-label="Permalink to &quot;1.查询&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">db.users.find</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;">   #查询所有 SELECT * from users</span></span>
<span class="line"><span style="color:#DBD7CAEE;">db.getCollection</span><span style="color:#666666;">(</span><span style="color:#80A665;">&#39;users&#39;</span><span style="color:#666666;">)</span><span style="color:#80A665;">.find</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;">  #查询所有</span></span>
<span class="line"><span style="color:#DBD7CAEE;">db.getCollection</span><span style="color:#666666;">(</span><span style="color:#80A665;">&#39;users&#39;</span><span style="color:#666666;">)</span><span style="color:#80A665;">.findOne</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;">  #查询第一个</span></span>
<span class="line"><span style="color:#DBD7CAEE;">db.getCollection</span><span style="color:#666666;">(</span><span style="color:#80A665;">&#39;users&#39;</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;">.findOne</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">{name:&#39;zhang3&#39;})    #查询符合条件的第一个</span></span>
<span class="line"></span>
<span class="line"><span style="color:#80A665;">db.users.find(</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">name:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1</span><span style="color:#C98A7D;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">age:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;">   </span><span style="color:#758575DD;">#SELECT _id,name,age from users</span></span>
<span class="line"><span style="color:#80A665;">db.users.find(</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">{</span><span style="color:#DBD7CAEE;">  </span><span style="color:#C98A7D;">name:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1</span><span style="color:#C98A7D;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">age:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1</span><span style="color:#C98A7D;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">_id:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">}</span><span style="color:#DBD7CAEE;"> )   </span><span style="color:#758575DD;">#去除id字段</span></span>
<span class="line"><span style="color:#80A665;">db.users.find(</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">name:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#C98A7D;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">age:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">}</span><span style="color:#DBD7CAEE;"> )   </span><span style="color:#758575DD;">#去除特定字段</span></span>
<span class="line"><span style="color:#80A665;">db.users.find</span><span style="color:#666666;">()</span><span style="color:#80A665;">.pretty</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;">   #格式化查询</span><span style="color:#666666;">(</span><span style="color:#80A665;">适用于长/复杂数据</span><span style="color:#666666;">)</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">db.users.find</span><span style="color:#999999;">()</span><span style="color:#393A34;">   #查询所有 SELECT * from users</span></span>
<span class="line"><span style="color:#393A34;">db.getCollection</span><span style="color:#999999;">(</span><span style="color:#59873A;">&#39;users&#39;</span><span style="color:#999999;">)</span><span style="color:#59873A;">.find</span><span style="color:#999999;">()</span><span style="color:#393A34;">  #查询所有</span></span>
<span class="line"><span style="color:#393A34;">db.getCollection</span><span style="color:#999999;">(</span><span style="color:#59873A;">&#39;users&#39;</span><span style="color:#999999;">)</span><span style="color:#59873A;">.findOne</span><span style="color:#999999;">()</span><span style="color:#393A34;">  #查询第一个</span></span>
<span class="line"><span style="color:#393A34;">db.getCollection</span><span style="color:#999999;">(</span><span style="color:#59873A;">&#39;users&#39;</span><span style="color:#999999;">)</span><span style="color:#393A34;">.findOne</span><span style="color:#999999;">(</span><span style="color:#393A34;">{name:&#39;zhang3&#39;})    #查询符合条件的第一个</span></span>
<span class="line"></span>
<span class="line"><span style="color:#59873A;">db.users.find(</span><span style="color:#393A34;"> </span><span style="color:#B56959;">{</span><span style="color:#393A34;"> </span><span style="color:#B56959;">name:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1</span><span style="color:#B56959;">,</span><span style="color:#393A34;"> </span><span style="color:#B56959;">age:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1</span><span style="color:#393A34;"> </span><span style="color:#B56959;">}</span><span style="color:#393A34;"> </span><span style="color:#999999;">)</span><span style="color:#393A34;">   </span><span style="color:#A0ADA0;">#SELECT _id,name,age from users</span></span>
<span class="line"><span style="color:#59873A;">db.users.find(</span><span style="color:#393A34;"> </span><span style="color:#B56959;">{</span><span style="color:#393A34;">  </span><span style="color:#B56959;">name:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1</span><span style="color:#B56959;">,</span><span style="color:#393A34;"> </span><span style="color:#B56959;">age:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1</span><span style="color:#B56959;">,</span><span style="color:#393A34;"> </span><span style="color:#B56959;">_id:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#393A34;"> </span><span style="color:#B56959;">}</span><span style="color:#393A34;"> )   </span><span style="color:#A0ADA0;">#去除id字段</span></span>
<span class="line"><span style="color:#59873A;">db.users.find(</span><span style="color:#393A34;"> </span><span style="color:#B56959;">{</span><span style="color:#393A34;"> </span><span style="color:#B56959;">name:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#B56959;">,</span><span style="color:#393A34;"> </span><span style="color:#B56959;">age:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#393A34;"> </span><span style="color:#B56959;">}</span><span style="color:#393A34;"> )   </span><span style="color:#A0ADA0;">#去除特定字段</span></span>
<span class="line"><span style="color:#59873A;">db.users.find</span><span style="color:#999999;">()</span><span style="color:#59873A;">.pretty</span><span style="color:#999999;">()</span><span style="color:#393A34;">   #格式化查询</span><span style="color:#999999;">(</span><span style="color:#59873A;">适用于长/复杂数据</span><span style="color:#999999;">)</span></span></code></pre></div><ul><li><strong>等值查询</strong></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">db.users.find(</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">age:18}</span><span style="color:#DBD7CAEE;"> )</span></span>
<span class="line"><span style="color:#758575DD;">#  WHERE age = 18</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">db.users.find(</span><span style="color:#393A34;"> </span><span style="color:#B56959;">{</span><span style="color:#393A34;"> </span><span style="color:#B56959;">age:18}</span><span style="color:#393A34;"> )</span></span>
<span class="line"><span style="color:#A0ADA0;">#  WHERE age = 18</span></span></code></pre></div><ul><li><strong>AND条件</strong></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">db.users.find(</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">age:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">$lt</span><span style="color:#C98A7D;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">30</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">,sex:</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">男</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">,}</span><span style="color:#DBD7CAEE;"> )</span></span>
<span class="line"><span style="color:#758575DD;">#  WHERE sex = &quot;男&quot; AND age &lt; 30</span></span>
<span class="line"><span style="color:#80A665;">db.users.find(</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">age:24,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">age:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">$lt</span><span style="color:#C98A7D;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">30</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">}</span><span style="color:#DBD7CAEE;"> )  </span><span style="color:#758575DD;">#相同字段and查询中出现多次,以最后一个为查询条件</span></span>
<span class="line"><span style="color:#758575DD;">#  WHERE age &lt; 30</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">db.users.find(</span><span style="color:#393A34;"> </span><span style="color:#B56959;">{</span><span style="color:#393A34;"> </span><span style="color:#B56959;">age:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">$lt</span><span style="color:#B56959;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">30</span><span style="color:#393A34;"> </span><span style="color:#B56959;">}</span><span style="color:#393A34;"> </span><span style="color:#B56959;">,sex:</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">男</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">,}</span><span style="color:#393A34;"> )</span></span>
<span class="line"><span style="color:#A0ADA0;">#  WHERE sex = &quot;男&quot; AND age &lt; 30</span></span>
<span class="line"><span style="color:#59873A;">db.users.find(</span><span style="color:#393A34;"> </span><span style="color:#B56959;">{</span><span style="color:#393A34;"> </span><span style="color:#B56959;">age:24,</span><span style="color:#393A34;"> </span><span style="color:#B56959;">age:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">$lt</span><span style="color:#B56959;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">30</span><span style="color:#393A34;"> </span><span style="color:#B56959;">}</span><span style="color:#393A34;"> </span><span style="color:#B56959;">}</span><span style="color:#393A34;"> )  </span><span style="color:#A0ADA0;">#相同字段and查询中出现多次,以最后一个为查询条件</span></span>
<span class="line"><span style="color:#A0ADA0;">#  WHERE age &lt; 30</span></span></code></pre></div><ul><li><strong>OR条件</strong></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">db.users.find(</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">$or</span><span style="color:#C98A7D;">:</span><span style="color:#DBD7CAEE;"> [{</span><span style="color:#80A665;">sex:</span><span style="color:#80A665;">&#39;男&#39;</span><span style="color:#80A665;">},</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">age:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">$lt</span><span style="color:#C98A7D;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">30</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">]</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">}</span><span style="color:#DBD7CAEE;"> )</span></span>
<span class="line"><span style="color:#758575DD;">#  WHERE sex = &quot;男&quot; OR age &lt; 30</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">db.users.find(</span><span style="color:#393A34;"> </span><span style="color:#B56959;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">$or</span><span style="color:#B56959;">:</span><span style="color:#393A34;"> [{</span><span style="color:#59873A;">sex:</span><span style="color:#59873A;">&#39;男&#39;</span><span style="color:#59873A;">},</span><span style="color:#393A34;"> </span><span style="color:#B56959;">{</span><span style="color:#393A34;"> </span><span style="color:#B56959;">age:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">$lt</span><span style="color:#B56959;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">30</span><span style="color:#393A34;"> </span><span style="color:#B56959;">}</span><span style="color:#393A34;"> </span><span style="color:#B56959;">}</span><span style="color:#393A34;"> </span><span style="color:#B56959;">]</span><span style="color:#393A34;"> </span><span style="color:#B56959;">}</span><span style="color:#393A34;"> )</span></span>
<span class="line"><span style="color:#A0ADA0;">#  WHERE sex = &quot;男&quot; OR age &lt; 30</span></span></code></pre></div><ul><li><strong>同时使用AND和OR条件</strong></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">db.users.find(</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">like:</span><span style="color:#80A665;">&#39;美女&#39;</span><span style="color:#80A665;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">     </span><span style="color:#BD976A;">$or</span><span style="color:#DBD7CAEE;">: [{</span><span style="color:#80A665;">sex:</span><span style="color:#80A665;">&#39;男&#39;</span><span style="color:#80A665;">},</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">age:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">$lt</span><span style="color:#C98A7D;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">30</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">},{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">name:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">/^p/</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">]</span></span>
<span class="line"><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> )</span></span>
<span class="line"><span style="color:#758575DD;">#  WHERE like = &quot;美女&quot; AND (sex = &quot;男&quot; OR age &lt; 30 OR name LIKE &quot;%p%&quot;)</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">db.users.find(</span><span style="color:#393A34;"> </span><span style="color:#B56959;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#59873A;">like:</span><span style="color:#59873A;">&#39;美女&#39;</span><span style="color:#59873A;">},</span></span>
<span class="line"><span style="color:#393A34;">     </span><span style="color:#B07D48;">$or</span><span style="color:#393A34;">: [{</span><span style="color:#59873A;">sex:</span><span style="color:#59873A;">&#39;男&#39;</span><span style="color:#59873A;">},</span><span style="color:#393A34;"> </span><span style="color:#B56959;">{</span><span style="color:#393A34;"> </span><span style="color:#B56959;">age:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">$lt</span><span style="color:#B56959;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">30</span><span style="color:#393A34;"> </span><span style="color:#B56959;">}</span><span style="color:#393A34;"> </span><span style="color:#B56959;">},{</span><span style="color:#393A34;"> </span><span style="color:#B56959;">name:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">/^p/</span><span style="color:#393A34;"> </span><span style="color:#B56959;">}</span><span style="color:#393A34;"> </span><span style="color:#B56959;">]</span></span>
<span class="line"><span style="color:#999999;">}</span><span style="color:#393A34;"> )</span></span>
<span class="line"><span style="color:#A0ADA0;">#  WHERE like = &quot;美女&quot; AND (sex = &quot;男&quot; OR age &lt; 30 OR name LIKE &quot;%p%&quot;)</span></span></code></pre></div><ul><li><strong>查询条件中使用查询操作符</strong></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">db.users.find(</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">age:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">$in</span><span style="color:#C98A7D;">:</span><span style="color:#DBD7CAEE;"> [ </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">20</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">22</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">]</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">}</span><span style="color:#DBD7CAEE;"> )</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">db.users.find(</span><span style="color:#393A34;"> </span><span style="color:#B56959;">{</span><span style="color:#393A34;"> </span><span style="color:#B56959;">age:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">$in</span><span style="color:#B56959;">:</span><span style="color:#393A34;"> [ </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">20</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">,</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">22</span><span style="color:#B5695999;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#B56959;">]</span><span style="color:#393A34;"> </span><span style="color:#B56959;">}</span><span style="color:#393A34;"> </span><span style="color:#B56959;">}</span><span style="color:#393A34;"> )</span></span></code></pre></div><ul><li><strong>模糊查询</strong></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">db.users.find(</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">name:/张/}</span><span style="color:#DBD7CAEE;"> ) </span><span style="color:#758575DD;">#查询名字中含有&#39;张&#39;的所有</span></span>
<span class="line"><span style="color:#758575DD;"># WHERE name LIKE &quot;%张%</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">db.users.find(</span><span style="color:#393A34;"> </span><span style="color:#B56959;">{</span><span style="color:#393A34;"> </span><span style="color:#B56959;">name:/张/}</span><span style="color:#393A34;"> ) </span><span style="color:#A0ADA0;">#查询名字中含有&#39;张&#39;的所有</span></span>
<span class="line"><span style="color:#A0ADA0;"># WHERE name LIKE &quot;%张%</span></span></code></pre></div><ul><li><strong>数组中的查询</strong></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">db.users.find(likes:</span><span style="color:#DBD7CAEE;">{</span><span style="color:#BD976A;">$size</span><span style="color:#DBD7CAEE;">:3})  </span><span style="color:#758575DD;">#查询&#39;喜好&#39;数组大小为3</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">db.users.find(likes:</span><span style="color:#393A34;">{</span><span style="color:#B07D48;">$size</span><span style="color:#393A34;">:3})  </span><span style="color:#A0ADA0;">#查询&#39;喜好&#39;数组大小为3</span></span></code></pre></div><ul><li><strong>排序</strong></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">db.users.find</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;">.sort</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">{age:-1}) # 1 升序   -1 降序 (没有这个字段的数据排在前面)</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">db.users.find</span><span style="color:#999999;">()</span><span style="color:#393A34;">.sort</span><span style="color:#999999;">(</span><span style="color:#393A34;">{age:-1}) # 1 升序   -1 降序 (没有这个字段的数据排在前面)</span></span></code></pre></div><ul><li><strong>分页</strong></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">db.users.find</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;">.skip</span><span style="color:#666666;">(</span><span style="color:#80A665;">40</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;">.limit</span><span style="color:#666666;">(</span><span style="color:#80A665;">30</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># 跳过40条数据查30条数据 (起始0,则从40开始)</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">db.users.find</span><span style="color:#999999;">()</span><span style="color:#393A34;">.skip</span><span style="color:#999999;">(</span><span style="color:#59873A;">40</span><span style="color:#999999;">)</span><span style="color:#393A34;">.limit</span><span style="color:#999999;">(</span><span style="color:#59873A;">30</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># 跳过40条数据查30条数据 (起始0,则从40开始)</span></span></code></pre></div><ul><li><strong>条数</strong></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">db.users.find</span><span style="color:#666666;">()</span><span style="color:#80A665;">.count</span><span style="color:#666666;">()</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">db.users.find</span><span style="color:#999999;">()</span><span style="color:#59873A;">.count</span><span style="color:#999999;">()</span></span></code></pre></div><ul><li><strong>去重</strong></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">db.users.find</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;">.distinct</span><span style="color:#666666;">(</span><span style="color:#80A665;">&#39;字段&#39;</span><span style="color:#666666;">)</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">db.users.find</span><span style="color:#999999;">()</span><span style="color:#393A34;">.distinct</span><span style="color:#999999;">(</span><span style="color:#59873A;">&#39;字段&#39;</span><span style="color:#999999;">)</span></span></code></pre></div><ul><li><strong>对比语法:</strong></li></ul><p><img src="https://vnote-bucket.oss-cn-shanghai.aliyuncs.com/image-20220507231641824.png" alt="image-20220507231641824"></p><h3 id="_2-插入" tabindex="-1">2.插入 <a class="header-anchor" href="#_2-插入" aria-label="Permalink to &quot;2.插入&quot;">​</a></h3><ul><li><strong>单条文档</strong></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">db.users.insert(</span><span style="color:#DBD7CAEE;">{&#39;</span><span style="color:#80A665;">name</span><span style="color:#80A665;">&#39;:&#39;</span><span style="color:#80A665;">李四</span><span style="color:#80A665;">&#39;,age:18,sex:&#39;</span><span style="color:#80A665;">男</span><span style="color:#80A665;">&#39;});  # 提示已弃用</span></span>
<span class="line"><span style="color:#80A665;">db.getCollection(&#39;</span><span style="color:#80A665;">users</span><span style="color:#80A665;">&#39;).insert({&#39;</span><span style="color:#80A665;">name</span><span style="color:#80A665;">&#39;:&#39;</span><span style="color:#80A665;">李四</span><span style="color:#80A665;">&#39;,age:18,sex:&#39;</span><span style="color:#80A665;">男</span><span style="color:#80A665;">&#39;})</span></span>
<span class="line"><span style="color:#80A665;">db.users.insertOne({&#39;</span><span style="color:#80A665;">name</span><span style="color:#80A665;">&#39;:&#39;</span><span style="color:#80A665;">赵六</span><span style="color:#80A665;">&#39;})</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">db.users.insert(</span><span style="color:#393A34;">{&#39;</span><span style="color:#59873A;">name</span><span style="color:#59873A;">&#39;:&#39;</span><span style="color:#59873A;">李四</span><span style="color:#59873A;">&#39;,age:18,sex:&#39;</span><span style="color:#59873A;">男</span><span style="color:#59873A;">&#39;});  # 提示已弃用</span></span>
<span class="line"><span style="color:#59873A;">db.getCollection(&#39;</span><span style="color:#59873A;">users</span><span style="color:#59873A;">&#39;).insert({&#39;</span><span style="color:#59873A;">name</span><span style="color:#59873A;">&#39;:&#39;</span><span style="color:#59873A;">李四</span><span style="color:#59873A;">&#39;,age:18,sex:&#39;</span><span style="color:#59873A;">男</span><span style="color:#59873A;">&#39;})</span></span>
<span class="line"><span style="color:#59873A;">db.users.insertOne({&#39;</span><span style="color:#59873A;">name</span><span style="color:#59873A;">&#39;:&#39;</span><span style="color:#59873A;">赵六</span><span style="color:#59873A;">&#39;})</span></span></code></pre></div><ul><li><strong>多条文档</strong></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">db.users.insert([</span><span style="color:#DBD7CAEE;">{name:</span><span style="color:#80A665;">&#39;缘一&#39;</span><span style="color:#80A665;">},</span><span style="color:#DBD7CAEE;">{name:</span><span style="color:#80A665;">&#39;二楞&#39;</span><span style="color:#80A665;">}]</span><span style="color:#DBD7CAEE;">)</span></span>
<span class="line"><span style="color:#80A665;">db.users.insertMany([</span><span style="color:#DBD7CAEE;">{name:</span><span style="color:#80A665;">&#39;缘一1&#39;</span><span style="color:#80A665;">},</span><span style="color:#DBD7CAEE;">{name:</span><span style="color:#80A665;">&#39;二楞1&#39;</span><span style="color:#80A665;">}]</span><span style="color:#DBD7CAEE;">)</span></span>
<span class="line"><span style="color:#80A665;">db.getCollection(</span><span style="color:#80A665;">&#39;users&#39;</span><span style="color:#DBD7CAEE;">).insertMany</span><span style="color:#666666;">([</span><span style="color:#DBD7CAEE;">{name:</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">zhang3</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#DBD7CAEE;">,age:19},{name:</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">zhang4</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#DBD7CAEE;">,age:19}</span><span style="color:#666666;">])</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">db.users.insert([</span><span style="color:#393A34;">{name:</span><span style="color:#59873A;">&#39;缘一&#39;</span><span style="color:#59873A;">},</span><span style="color:#393A34;">{name:</span><span style="color:#59873A;">&#39;二楞&#39;</span><span style="color:#59873A;">}]</span><span style="color:#393A34;">)</span></span>
<span class="line"><span style="color:#59873A;">db.users.insertMany([</span><span style="color:#393A34;">{name:</span><span style="color:#59873A;">&#39;缘一1&#39;</span><span style="color:#59873A;">},</span><span style="color:#393A34;">{name:</span><span style="color:#59873A;">&#39;二楞1&#39;</span><span style="color:#59873A;">}]</span><span style="color:#393A34;">)</span></span>
<span class="line"><span style="color:#59873A;">db.getCollection(</span><span style="color:#59873A;">&#39;users&#39;</span><span style="color:#393A34;">).insertMany</span><span style="color:#999999;">([</span><span style="color:#393A34;">{name:</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">zhang3</span><span style="color:#B5695999;">&#39;</span><span style="color:#393A34;">,age:19},{name:</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">zhang4</span><span style="color:#B5695999;">&#39;</span><span style="color:#393A34;">,age:19}</span><span style="color:#999999;">])</span></span></code></pre></div><ul><li><strong>脚本方式</strong></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#DBD7CAEE;">for</span><span style="color:#666666;">(</span><span style="color:#B8A965;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">i</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">=</span><span style="color:#4C9A91;">0</span><span style="color:#666666;">;</span><span style="color:#80A665;">i&lt;5</span><span style="color:#666666;">;</span><span style="color:#80A665;">i++</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#80A665;">db.users.insert(</span><span style="color:#DBD7CAEE;">{id:i,name:</span><span style="color:#80A665;">&#39;zhang&#39;</span><span style="color:#80A665;">+i}</span><span style="color:#DBD7CAEE;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">}</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#393A34;">for</span><span style="color:#999999;">(</span><span style="color:#998418;">let</span><span style="color:#393A34;"> </span><span style="color:#B56959;">i</span><span style="color:#393A34;"> </span><span style="color:#B56959;">=</span><span style="color:#2F798A;">0</span><span style="color:#999999;">;</span><span style="color:#59873A;">i&lt;5</span><span style="color:#999999;">;</span><span style="color:#59873A;">i++</span><span style="color:#999999;">)</span><span style="color:#393A34;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#59873A;">db.users.insert(</span><span style="color:#393A34;">{id:i,name:</span><span style="color:#59873A;">&#39;zhang&#39;</span><span style="color:#59873A;">+i}</span><span style="color:#393A34;">)</span></span>
<span class="line"><span style="color:#393A34;">}</span></span></code></pre></div><h3 id="_3-删除" tabindex="-1">3.删除 <a class="header-anchor" href="#_3-删除" aria-label="Permalink to &quot;3.删除&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">db.users.remove(</span><span style="color:#DBD7CAEE;">{})   </span><span style="color:#758575DD;">#删除所有文档</span></span>
<span class="line"><span style="color:#80A665;">db.users.remove(</span><span style="color:#DBD7CAEE;">{_id:ObjectId(</span><span style="color:#80A665;">&quot;62767f841f41a9d7de748124&quot;</span><span style="color:#DBD7CAEE;">)})   </span><span style="color:#758575DD;">#删除某一条</span></span>
<span class="line"><span style="color:#80A665;">db.users.remove(</span><span style="color:#DBD7CAEE;">{age:20})   </span><span style="color:#758575DD;">#删除满足条件的数据</span></span>
<span class="line"></span>
<span class="line"><span style="color:#80A665;">db.getCollection(</span><span style="color:#80A665;">&#39;users&#39;</span><span style="color:#DBD7CAEE;">).deleteOne</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">{name:&#39;zhang3&#39;})   #删除某一条</span></span>
<span class="line"><span style="color:#80A665;">db.getCollection(</span><span style="color:#80A665;">&#39;users&#39;</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;">.deleteMany</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">{age:18})   #删除满足条件的数据</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">db.users.remove(</span><span style="color:#393A34;">{})   </span><span style="color:#A0ADA0;">#删除所有文档</span></span>
<span class="line"><span style="color:#59873A;">db.users.remove(</span><span style="color:#393A34;">{_id:ObjectId(</span><span style="color:#59873A;">&quot;62767f841f41a9d7de748124&quot;</span><span style="color:#393A34;">)})   </span><span style="color:#A0ADA0;">#删除某一条</span></span>
<span class="line"><span style="color:#59873A;">db.users.remove(</span><span style="color:#393A34;">{age:20})   </span><span style="color:#A0ADA0;">#删除满足条件的数据</span></span>
<span class="line"></span>
<span class="line"><span style="color:#59873A;">db.getCollection(</span><span style="color:#59873A;">&#39;users&#39;</span><span style="color:#393A34;">).deleteOne</span><span style="color:#999999;">(</span><span style="color:#393A34;">{name:&#39;zhang3&#39;})   #删除某一条</span></span>
<span class="line"><span style="color:#59873A;">db.getCollection(</span><span style="color:#59873A;">&#39;users&#39;</span><span style="color:#999999;">)</span><span style="color:#393A34;">.deleteMany</span><span style="color:#999999;">(</span><span style="color:#393A34;">{age:18})   #删除满足条件的数据</span></span></code></pre></div><h3 id="_4-更新" tabindex="-1">4.更新 <a class="header-anchor" href="#_4-更新" aria-label="Permalink to &quot;4.更新&quot;">​</a></h3><p>语法 :</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#758575DD;">/* db.集合名称.update(</span></span>
<span class="line"><span style="color:#758575DD;">  &lt;query&gt;,</span></span>
<span class="line"><span style="color:#758575DD;">    &lt;update&gt;,</span></span>
<span class="line"><span style="color:#758575DD;">    {</span></span>
<span class="line"><span style="color:#758575DD;">        updert:&lt;boolean&gt;,</span></span>
<span class="line"><span style="color:#758575DD;">        multi:&lt;boolean&gt;,</span></span>
<span class="line"><span style="color:#758575DD;">      writeConcern:&lt;document&gt; //抛出异常的级别</span></span>
<span class="line"><span style="color:#758575DD;">    }</span></span>
<span class="line"><span style="color:#758575DD;">) */</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">/* db.集合名称.update(</span></span>
<span class="line"><span style="color:#A0ADA0;">  &lt;query&gt;,</span></span>
<span class="line"><span style="color:#A0ADA0;">    &lt;update&gt;,</span></span>
<span class="line"><span style="color:#A0ADA0;">    {</span></span>
<span class="line"><span style="color:#A0ADA0;">        updert:&lt;boolean&gt;,</span></span>
<span class="line"><span style="color:#A0ADA0;">        multi:&lt;boolean&gt;,</span></span>
<span class="line"><span style="color:#A0ADA0;">      writeConcern:&lt;document&gt; //抛出异常的级别</span></span>
<span class="line"><span style="color:#A0ADA0;">    }</span></span>
<span class="line"><span style="color:#A0ADA0;">) */</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">db.users.update(</span><span style="color:#DBD7CAEE;">{_id:ObjectId(</span><span style="color:#80A665;">&#39;627686574f57a31b328b63ab&#39;</span><span style="color:#DBD7CAEE;">)},{</span><span style="color:#BD976A;">$set</span><span style="color:#DBD7CAEE;">:{</span><span style="color:#80A665;">age:24,likes:[</span><span style="color:#80A665;">&#39;代码&#39;</span><span style="color:#80A665;">,</span><span style="color:#80A665;">&#39;吃饭&#39;</span><span style="color:#80A665;">]}}</span><span style="color:#DBD7CAEE;">)  </span><span style="color:#758575DD;">#指定更新</span></span>
<span class="line"><span style="color:#80A665;">db.users.update(</span><span style="color:#DBD7CAEE;">{age:18}</span><span style="color:#80A665;">,</span><span style="color:#DBD7CAEE;">{</span><span style="color:#BD976A;">$set</span><span style="color:#DBD7CAEE;">:{age:24,likes:[</span><span style="color:#80A665;">&#39;动漫&#39;</span><span style="color:#80A665;">,</span><span style="color:#80A665;">&#39;美女&#39;</span><span style="color:#80A665;">]}}</span><span style="color:#DBD7CAEE;">)  </span><span style="color:#758575DD;">#更新匹配到的第一条</span></span>
<span class="line"><span style="color:#80A665;">db.users.update(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">{</span><span style="color:#80A665;">age:18},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">{</span><span style="color:#BD976A;">$set</span><span style="color:#DBD7CAEE;">:{</span><span style="color:#80A665;">age:24,likes:[</span><span style="color:#80A665;">&#39;动漫&#39;</span><span style="color:#80A665;">,</span><span style="color:#80A665;">&#39;美女&#39;</span><span style="color:#80A665;">]}},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">{</span><span style="color:#80A665;">multi:true}</span><span style="color:#DBD7CAEE;">   </span><span style="color:#758575DD;">#更新多条</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">{</span><span style="color:#80A665;">upsert:true}</span><span style="color:#DBD7CAEE;">   </span><span style="color:#758575DD;">#不存在则插入</span></span>
<span class="line"><span style="color:#DBD7CAEE;">)  #更新匹配到的所有</span></span>
<span class="line"></span>
<span class="line"><span style="color:#80A665;">db.getCollection(</span><span style="color:#80A665;">&#39;users&#39;</span><span style="color:#DBD7CAEE;">).update</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">{age:18},{$set:{age:24,likes:[&#39;动漫&#39;,&#39;美女&#39;]}})  #更新匹配到的第一条</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">db.users.update(</span><span style="color:#393A34;">{_id:ObjectId(</span><span style="color:#59873A;">&#39;627686574f57a31b328b63ab&#39;</span><span style="color:#393A34;">)},{</span><span style="color:#B07D48;">$set</span><span style="color:#393A34;">:{</span><span style="color:#59873A;">age:24,likes:[</span><span style="color:#59873A;">&#39;代码&#39;</span><span style="color:#59873A;">,</span><span style="color:#59873A;">&#39;吃饭&#39;</span><span style="color:#59873A;">]}}</span><span style="color:#393A34;">)  </span><span style="color:#A0ADA0;">#指定更新</span></span>
<span class="line"><span style="color:#59873A;">db.users.update(</span><span style="color:#393A34;">{age:18}</span><span style="color:#59873A;">,</span><span style="color:#393A34;">{</span><span style="color:#B07D48;">$set</span><span style="color:#393A34;">:{age:24,likes:[</span><span style="color:#59873A;">&#39;动漫&#39;</span><span style="color:#59873A;">,</span><span style="color:#59873A;">&#39;美女&#39;</span><span style="color:#59873A;">]}}</span><span style="color:#393A34;">)  </span><span style="color:#A0ADA0;">#更新匹配到的第一条</span></span>
<span class="line"><span style="color:#59873A;">db.users.update(</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">{</span><span style="color:#59873A;">age:18},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">{</span><span style="color:#B07D48;">$set</span><span style="color:#393A34;">:{</span><span style="color:#59873A;">age:24,likes:[</span><span style="color:#59873A;">&#39;动漫&#39;</span><span style="color:#59873A;">,</span><span style="color:#59873A;">&#39;美女&#39;</span><span style="color:#59873A;">]}},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">{</span><span style="color:#59873A;">multi:true}</span><span style="color:#393A34;">   </span><span style="color:#A0ADA0;">#更新多条</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">{</span><span style="color:#59873A;">upsert:true}</span><span style="color:#393A34;">   </span><span style="color:#A0ADA0;">#不存在则插入</span></span>
<span class="line"><span style="color:#393A34;">)  #更新匹配到的所有</span></span>
<span class="line"></span>
<span class="line"><span style="color:#59873A;">db.getCollection(</span><span style="color:#59873A;">&#39;users&#39;</span><span style="color:#393A34;">).update</span><span style="color:#999999;">(</span><span style="color:#393A34;">{age:18},{$set:{age:24,likes:[&#39;动漫&#39;,&#39;美女&#39;]}})  #更新匹配到的第一条</span></span></code></pre></div><h2 id="五、mongoose学习" tabindex="-1">五、<a href="http://www.mongoosejs.net/docs/index.html" target="_blank" rel="noreferrer">Mongoose学习</a> <a class="header-anchor" href="#五、mongoose学习" aria-label="Permalink to &quot;五、[Mongoose学习](http://www.mongoosejs.net/docs/index.html)&quot;">​</a></h2><h3 id="_1-插入" tabindex="-1">1.插入 <a class="header-anchor" href="#_1-插入" aria-label="Permalink to &quot;1.插入&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#B8A965;">exports</span><span style="color:#666666;">.</span><span style="color:#80A665;">register</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">async</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">req</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">res</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">next</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#4D9375;">try</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">user</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">User</span><span style="color:#666666;">(</span><span style="color:#BD976A;">req</span><span style="color:#666666;">.</span><span style="color:#BD976A;">body</span><span style="color:#666666;">.</span><span style="color:#BD976A;">user</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">await</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">user</span><span style="color:#666666;">.</span><span style="color:#80A665;">save</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// 转化为json才能移除密码</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">user</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">user</span><span style="color:#666666;">.</span><span style="color:#80A665;">toJSON</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">delete</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">user</span><span style="color:#666666;">.</span><span style="color:#BD976A;">password</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#80A665;">send</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">msg</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">注册成功!</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">user</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">catch</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">error</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">next</span><span style="color:#666666;">(</span><span style="color:#BD976A;">error</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">};</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#998418;">exports</span><span style="color:#999999;">.</span><span style="color:#59873A;">register</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">async</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">req</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">res</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">next</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1E754F;">try</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">user</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">User</span><span style="color:#999999;">(</span><span style="color:#B07D48;">req</span><span style="color:#999999;">.</span><span style="color:#B07D48;">body</span><span style="color:#999999;">.</span><span style="color:#B07D48;">user</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">await</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">user</span><span style="color:#999999;">.</span><span style="color:#59873A;">save</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// 转化为json才能移除密码</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">user</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">user</span><span style="color:#999999;">.</span><span style="color:#59873A;">toJSON</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">delete</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">user</span><span style="color:#999999;">.</span><span style="color:#B07D48;">password</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#59873A;">send</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">msg</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">注册成功!</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">user</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">catch</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">error</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">next</span><span style="color:#999999;">(</span><span style="color:#B07D48;">error</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">};</span></span></code></pre></div><h3 id="_2-删除" tabindex="-1">2.删除 <a class="header-anchor" href="#_2-删除" aria-label="Permalink to &quot;2.删除&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#B8A965;">exports</span><span style="color:#666666;">.</span><span style="color:#80A665;">deleteArticle</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">async</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">req</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">res</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">next</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#4D9375;">try</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">id</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">mongoose</span><span style="color:#666666;">.</span><span style="color:#BD976A;">Types</span><span style="color:#666666;">.</span><span style="color:#80A665;">ObjectId</span><span style="color:#666666;">(</span><span style="color:#BD976A;">req</span><span style="color:#666666;">.</span><span style="color:#BD976A;">body</span><span style="color:#666666;">.</span><span style="color:#BD976A;">id</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">result</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">await</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Article</span><span style="color:#666666;">.</span><span style="color:#80A665;">findByIdAndRemove</span><span style="color:#666666;">(</span><span style="color:#BD976A;">id</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">result: </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">result</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#80A665;">succ</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">msg</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">文章删除成功!</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">catch</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">error</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#80A665;">errs</span><span style="color:#666666;">(</span><span style="color:#BD976A;">error</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">};</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#998418;">exports</span><span style="color:#999999;">.</span><span style="color:#59873A;">deleteArticle</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">async</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">req</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">res</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">next</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1E754F;">try</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">id</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">mongoose</span><span style="color:#999999;">.</span><span style="color:#B07D48;">Types</span><span style="color:#999999;">.</span><span style="color:#59873A;">ObjectId</span><span style="color:#999999;">(</span><span style="color:#B07D48;">req</span><span style="color:#999999;">.</span><span style="color:#B07D48;">body</span><span style="color:#999999;">.</span><span style="color:#B07D48;">id</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">result</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">await</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Article</span><span style="color:#999999;">.</span><span style="color:#59873A;">findByIdAndRemove</span><span style="color:#999999;">(</span><span style="color:#B07D48;">id</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">result: </span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">result</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#59873A;">succ</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">msg</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">文章删除成功!</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">catch</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">error</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#59873A;">errs</span><span style="color:#999999;">(</span><span style="color:#B07D48;">error</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">};</span></span></code></pre></div><h3 id="_3-更新" tabindex="-1">3.更新 <a class="header-anchor" href="#_3-更新" aria-label="Permalink to &quot;3.更新&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#B8A965;">exports</span><span style="color:#666666;">.</span><span style="color:#80A665;">updateArticle</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">async</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">req</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">res</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">next</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">article</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">req</span><span style="color:#666666;">.</span><span style="color:#BD976A;">body</span><span style="color:#666666;">.</span><span style="color:#BD976A;">article</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#4D9375;">try</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">_id</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">id</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">title</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">desc</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">body</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">tagList</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">req</span><span style="color:#666666;">.</span><span style="color:#BD976A;">body</span><span style="color:#666666;">.</span><span style="color:#BD976A;">article</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">article</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">await</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Article</span><span style="color:#666666;">.</span><span style="color:#80A665;">findByIdAndUpdate</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">id</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">$set</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">req</span><span style="color:#666666;">.</span><span style="color:#BD976A;">body</span><span style="color:#666666;">.</span><span style="color:#BD976A;">article</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">new</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#80A665;">succ</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">msg</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">文章更新成功!</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">article</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">catch</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">error</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#80A665;">errs</span><span style="color:#666666;">(</span><span style="color:#BD976A;">error</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">};</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#998418;">exports</span><span style="color:#999999;">.</span><span style="color:#59873A;">updateArticle</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">async</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">req</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">res</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">next</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">article</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">req</span><span style="color:#999999;">.</span><span style="color:#B07D48;">body</span><span style="color:#999999;">.</span><span style="color:#B07D48;">article</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1E754F;">try</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">_id</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">id</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">title</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">desc</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">body</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">tagList</span><span style="color:#393A34;"> </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">req</span><span style="color:#999999;">.</span><span style="color:#B07D48;">body</span><span style="color:#999999;">.</span><span style="color:#B07D48;">article</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">article</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">await</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Article</span><span style="color:#999999;">.</span><span style="color:#59873A;">findByIdAndUpdate</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">id</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#998418;">$set</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">req</span><span style="color:#999999;">.</span><span style="color:#B07D48;">body</span><span style="color:#999999;">.</span><span style="color:#B07D48;">article</span><span style="color:#393A34;"> </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#998418;">new</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#393A34;"> </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#59873A;">succ</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">msg</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">文章更新成功!</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">article</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">catch</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">error</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#59873A;">errs</span><span style="color:#999999;">(</span><span style="color:#B07D48;">error</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">};</span></span></code></pre></div><h3 id="_4-查询" tabindex="-1">4.查询 <a class="header-anchor" href="#_4-查询" aria-label="Permalink to &quot;4.查询&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#758575DD;">// 获取一个文章</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B8A965;">exports</span><span style="color:#666666;">.</span><span style="color:#80A665;">getArticleById</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">async</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">req</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">res</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">next</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#4D9375;">try</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// 映射用户</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">article</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">await</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Article</span><span style="color:#666666;">.</span><span style="color:#80A665;">findById</span><span style="color:#666666;">(</span><span style="color:#BD976A;">req</span><span style="color:#666666;">.</span><span style="color:#BD976A;">params</span><span style="color:#666666;">.</span><span style="color:#BD976A;">articleId</span><span style="color:#666666;">).</span><span style="color:#80A665;">populate</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">author</span><span style="color:#C98A7D99;">&quot;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#CB7676;">!</span><span style="color:#BD976A;">article</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#80A665;">errs</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">文章不存在!</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#80A665;">succ</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">msg</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">文章查询成功!</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">article</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">catch</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">error</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#80A665;">errs</span><span style="color:#666666;">(</span><span style="color:#BD976A;">error</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">};</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// 获取一个文章</span></span>
<span class="line"></span>
<span class="line"><span style="color:#998418;">exports</span><span style="color:#999999;">.</span><span style="color:#59873A;">getArticleById</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">async</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">req</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">res</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">next</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1E754F;">try</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// 映射用户</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">article</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">await</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Article</span><span style="color:#999999;">.</span><span style="color:#59873A;">findById</span><span style="color:#999999;">(</span><span style="color:#B07D48;">req</span><span style="color:#999999;">.</span><span style="color:#B07D48;">params</span><span style="color:#999999;">.</span><span style="color:#B07D48;">articleId</span><span style="color:#999999;">).</span><span style="color:#59873A;">populate</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">author</span><span style="color:#B5695999;">&quot;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#AB5959;">!</span><span style="color:#B07D48;">article</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#59873A;">errs</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">文章不存在!</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#59873A;">succ</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">msg</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">文章查询成功!</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">article</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">catch</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">error</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#59873A;">errs</span><span style="color:#999999;">(</span><span style="color:#B07D48;">error</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">};</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#758575DD;">// 获取文章列表</span></span>
<span class="line"><span style="color:#B8A965;">exports</span><span style="color:#666666;">.</span><span style="color:#80A665;">getArticles</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">async</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">req</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">res</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">next</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#4D9375;">try</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">limit</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">20</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">offset</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">tag</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">author</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">favorited</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">sortBy</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">req</span><span style="color:#666666;">.</span><span style="color:#BD976A;">body</span><span style="color:#666666;">.</span><span style="color:#BD976A;">conditions</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">||</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{};</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">filter</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{};</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">tag</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">filter</span><span style="color:#666666;">.</span><span style="color:#BD976A;">tagList</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">tag</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// 某个作者的文章</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">author</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">user</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">await</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">User</span><span style="color:#666666;">.</span><span style="color:#80A665;">findOne</span><span style="color:#666666;">({</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">username</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">author</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">filter</span><span style="color:#666666;">.</span><span style="color:#BD976A;">author</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">user</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">?</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">user</span><span style="color:#666666;">.</span><span style="color:#BD976A;">_id</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">null</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">articleList</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">await</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Article</span><span style="color:#666666;">.</span><span style="color:#80A665;">find</span><span style="color:#666666;">(</span><span style="color:#BD976A;">filter</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">.</span><span style="color:#80A665;">skip</span><span style="color:#666666;">(</span><span style="color:#BD976A;">Number</span><span style="color:#666666;">.</span><span style="color:#80A665;">parseInt</span><span style="color:#666666;">(</span><span style="color:#BD976A;">offset</span><span style="color:#666666;">))</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">.</span><span style="color:#80A665;">limit</span><span style="color:#666666;">(</span><span style="color:#BD976A;">Number</span><span style="color:#666666;">.</span><span style="color:#80A665;">parseInt</span><span style="color:#666666;">(</span><span style="color:#BD976A;">limit</span><span style="color:#666666;">))</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">.</span><span style="color:#80A665;">sort</span><span style="color:#666666;">({</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">creeateAt</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#4C9A91;">1</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">...</span><span style="color:#BD976A;">sortBy</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">articleCount</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">await</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Article</span><span style="color:#666666;">.</span><span style="color:#80A665;">find</span><span style="color:#666666;">(</span><span style="color:#BD976A;">filter</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">.</span><span style="color:#80A665;">skip</span><span style="color:#666666;">(</span><span style="color:#BD976A;">offset</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">.</span><span style="color:#80A665;">limit</span><span style="color:#666666;">(</span><span style="color:#BD976A;">limit</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">.</span><span style="color:#80A665;">count</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">totalCount</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">await</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Article</span><span style="color:#666666;">.</span><span style="color:#80A665;">countDocuments</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#CB7676;">!</span><span style="color:#BD976A;">articleList</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#80A665;">errs</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">暂无文章!</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#80A665;">succ</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">msg</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">文章查询列表成功!</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">articleList</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">articleCount</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">totalCount</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">catch</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">error</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">res</span><span style="color:#666666;">.</span><span style="color:#80A665;">errs</span><span style="color:#666666;">(</span><span style="color:#BD976A;">error</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">};</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// 获取文章列表</span></span>
<span class="line"><span style="color:#998418;">exports</span><span style="color:#999999;">.</span><span style="color:#59873A;">getArticles</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">async</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">req</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">res</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">next</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1E754F;">try</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">limit</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">20</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">offset</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">tag</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">author</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">favorited</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">sortBy</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">req</span><span style="color:#999999;">.</span><span style="color:#B07D48;">body</span><span style="color:#999999;">.</span><span style="color:#B07D48;">conditions</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">||</span><span style="color:#393A34;"> </span><span style="color:#999999;">{};</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">filter</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#999999;">{};</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">tag</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">filter</span><span style="color:#999999;">.</span><span style="color:#B07D48;">tagList</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">tag</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// 某个作者的文章</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">author</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">user</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">await</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">User</span><span style="color:#999999;">.</span><span style="color:#59873A;">findOne</span><span style="color:#999999;">({</span><span style="color:#393A34;"> </span><span style="color:#998418;">username</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">author</span><span style="color:#393A34;"> </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">filter</span><span style="color:#999999;">.</span><span style="color:#B07D48;">author</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">user</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">?</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">user</span><span style="color:#999999;">.</span><span style="color:#B07D48;">_id</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">:</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">null</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">articleList</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">await</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Article</span><span style="color:#999999;">.</span><span style="color:#59873A;">find</span><span style="color:#999999;">(</span><span style="color:#B07D48;">filter</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">.</span><span style="color:#59873A;">skip</span><span style="color:#999999;">(</span><span style="color:#B07D48;">Number</span><span style="color:#999999;">.</span><span style="color:#59873A;">parseInt</span><span style="color:#999999;">(</span><span style="color:#B07D48;">offset</span><span style="color:#999999;">))</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">.</span><span style="color:#59873A;">limit</span><span style="color:#999999;">(</span><span style="color:#B07D48;">Number</span><span style="color:#999999;">.</span><span style="color:#59873A;">parseInt</span><span style="color:#999999;">(</span><span style="color:#B07D48;">limit</span><span style="color:#999999;">))</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">.</span><span style="color:#59873A;">sort</span><span style="color:#999999;">({</span><span style="color:#393A34;"> </span><span style="color:#998418;">creeateAt</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#2F798A;">1</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">...</span><span style="color:#B07D48;">sortBy</span><span style="color:#393A34;"> </span><span style="color:#999999;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">articleCount</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">await</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Article</span><span style="color:#999999;">.</span><span style="color:#59873A;">find</span><span style="color:#999999;">(</span><span style="color:#B07D48;">filter</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">.</span><span style="color:#59873A;">skip</span><span style="color:#999999;">(</span><span style="color:#B07D48;">offset</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">.</span><span style="color:#59873A;">limit</span><span style="color:#999999;">(</span><span style="color:#B07D48;">limit</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">.</span><span style="color:#59873A;">count</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">totalCount</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">await</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Article</span><span style="color:#999999;">.</span><span style="color:#59873A;">countDocuments</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#AB5959;">!</span><span style="color:#B07D48;">articleList</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#59873A;">errs</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">暂无文章!</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#59873A;">succ</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">msg</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">文章查询列表成功!</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">articleList</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">articleCount</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">totalCount</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">catch</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">error</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">res</span><span style="color:#999999;">.</span><span style="color:#59873A;">errs</span><span style="color:#999999;">(</span><span style="color:#B07D48;">error</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">};</span></span></code></pre></div><h3 id="_5-模型" tabindex="-1">5.模型 <a class="header-anchor" href="#_5-模型" aria-label="Permalink to &quot;5.模型&quot;">​</a></h3><p>📝model/index.js</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">mongoose</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">require</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">mongoose</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">dbUri</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">require</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">../config/config.default</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#BD976A;">mongoose</span><span style="color:#666666;">.</span><span style="color:#80A665;">connect</span><span style="color:#666666;">(</span><span style="color:#BD976A;">dbUri</span><span style="color:#666666;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">db</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">mongoose</span><span style="color:#666666;">.</span><span style="color:#BD976A;">connection</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BD976A;">db</span><span style="color:#666666;">.</span><span style="color:#80A665;">on</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">error</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#BD976A;">error</span><span style="color:#666666;">.</span><span style="color:#80A665;">bind</span><span style="color:#666666;">(</span><span style="color:#BD976A;">console</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">MongDB数据库连接失败!</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BD976A;">db</span><span style="color:#666666;">.</span><span style="color:#80A665;">once</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">open</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">MongDB数据库连接成功!</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Cat</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">mongoose</span><span style="color:#666666;">.</span><span style="color:#80A665;">model</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">Cat</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">String</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B8A965;">module</span><span style="color:#666666;">.</span><span style="color:#B8A965;">exports</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">User</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">mongoose</span><span style="color:#666666;">.</span><span style="color:#80A665;">model</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">User</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">require</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">./user</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">)),</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">Article</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">mongoose</span><span style="color:#666666;">.</span><span style="color:#80A665;">model</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">Article</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">require</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">./article</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">)),</span></span>
<span class="line"><span style="color:#666666;">};</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">mongoose</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#59873A;">require</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">mongoose</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">dbUri</span><span style="color:#393A34;"> </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#59873A;">require</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">../config/config.default</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#B07D48;">mongoose</span><span style="color:#999999;">.</span><span style="color:#59873A;">connect</span><span style="color:#999999;">(</span><span style="color:#B07D48;">dbUri</span><span style="color:#999999;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">db</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">mongoose</span><span style="color:#999999;">.</span><span style="color:#B07D48;">connection</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B07D48;">db</span><span style="color:#999999;">.</span><span style="color:#59873A;">on</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">error</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#B07D48;">error</span><span style="color:#999999;">.</span><span style="color:#59873A;">bind</span><span style="color:#999999;">(</span><span style="color:#B07D48;">console</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">MongDB数据库连接失败!</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B07D48;">db</span><span style="color:#999999;">.</span><span style="color:#59873A;">once</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">open</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">console</span><span style="color:#999999;">.</span><span style="color:#59873A;">log</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">MongDB数据库连接成功!</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Cat</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">mongoose</span><span style="color:#999999;">.</span><span style="color:#59873A;">model</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">Cat</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">String</span><span style="color:#393A34;"> </span><span style="color:#999999;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#998418;">module</span><span style="color:#999999;">.</span><span style="color:#998418;">exports</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">User</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">mongoose</span><span style="color:#999999;">.</span><span style="color:#59873A;">model</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">User</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#59873A;">require</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">./user</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">)),</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">Article</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">mongoose</span><span style="color:#999999;">.</span><span style="color:#59873A;">model</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">Article</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#59873A;">require</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">./article</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">)),</span></span>
<span class="line"><span style="color:#999999;">};</span></span></code></pre></div><p>📝model/base.js</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#758575DD;">// 基础模型</span></span>
<span class="line"><span style="color:#B8A965;">module</span><span style="color:#666666;">.</span><span style="color:#B8A965;">exports</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">createAt</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Date</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">default</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Date</span><span style="color:#666666;">.</span><span style="color:#BD976A;">now</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">updtedAt</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Date</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">default</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Date</span><span style="color:#666666;">.</span><span style="color:#BD976A;">now</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#666666;">};</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// 基础模型</span></span>
<span class="line"><span style="color:#998418;">module</span><span style="color:#999999;">.</span><span style="color:#998418;">exports</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">createAt</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Date</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">default</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Date</span><span style="color:#999999;">.</span><span style="color:#B07D48;">now</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">updtedAt</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Date</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">default</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Date</span><span style="color:#999999;">.</span><span style="color:#B07D48;">now</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#999999;">};</span></span></code></pre></div><p>📝model/user.js</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">mongoose</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">require</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">mongoose</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">md5</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">require</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">../util/md5</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">baseSchema</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">require</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">./base</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#758575DD;">// 用户模型</span></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">userSchema</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">mongoose</span><span style="color:#666666;">.</span><span style="color:#80A665;">Schema</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">...</span><span style="color:#BD976A;">baseSchema</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">username</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">String</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">required</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">password</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">String</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">required</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">set</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">value</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">md5</span><span style="color:#666666;">(</span><span style="color:#BD976A;">value</span><span style="color:#666666;">),</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">select</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">false</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">email</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">String</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">required</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">bio</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">String</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">default</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">null</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">image</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">String</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">default</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">null</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#B8A965;">module</span><span style="color:#666666;">.</span><span style="color:#B8A965;">exports</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">userSchema</span><span style="color:#666666;">;</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">mongoose</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#59873A;">require</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">mongoose</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">md5</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#59873A;">require</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">../util/md5</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">baseSchema</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#59873A;">require</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">./base</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#A0ADA0;">// 用户模型</span></span>
<span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">userSchema</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">new</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">mongoose</span><span style="color:#999999;">.</span><span style="color:#59873A;">Schema</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">...</span><span style="color:#B07D48;">baseSchema</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">username</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">String</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">required</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">password</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">String</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">required</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">set</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">value</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#59873A;">md5</span><span style="color:#999999;">(</span><span style="color:#B07D48;">value</span><span style="color:#999999;">),</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">select</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">false</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">email</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">String</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">required</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">bio</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">String</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">default</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">null</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">image</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">String</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">default</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">null</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#998418;">module</span><span style="color:#999999;">.</span><span style="color:#998418;">exports</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">userSchema</span><span style="color:#999999;">;</span></span></code></pre></div><p>📝model/article.js</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">mongoose</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">require</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">mongoose</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Schema</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">mongoose</span><span style="color:#666666;">.</span><span style="color:#BD976A;">Schema</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">baseSchema</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">require</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">./base</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#758575DD;">// 文章模型</span></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">articleSchema</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">mongoose</span><span style="color:#666666;">.</span><span style="color:#80A665;">Schema</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">...</span><span style="color:#BD976A;">baseSchema</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">title</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">String</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">required</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">desc</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">String</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">required</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">body</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">String</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">required</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">favoritesCount</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Number</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">default</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">tagList</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">[</span><span style="color:#BD976A;">String</span><span style="color:#666666;">],</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">default</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">null</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">author</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Schema</span><span style="color:#666666;">.</span><span style="color:#BD976A;">Types</span><span style="color:#666666;">.</span><span style="color:#BD976A;">ObjectId</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">ref</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">User</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">required</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#B8A965;">module</span><span style="color:#666666;">.</span><span style="color:#B8A965;">exports</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">articleSchema</span><span style="color:#666666;">;</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">mongoose</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#59873A;">require</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">mongoose</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Schema</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">mongoose</span><span style="color:#999999;">.</span><span style="color:#B07D48;">Schema</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">baseSchema</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#59873A;">require</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">./base</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#A0ADA0;">// 文章模型</span></span>
<span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">articleSchema</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">new</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">mongoose</span><span style="color:#999999;">.</span><span style="color:#59873A;">Schema</span><span style="color:#999999;">({</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">...</span><span style="color:#B07D48;">baseSchema</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">title</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">String</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">required</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">desc</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">String</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">required</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">body</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">String</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">required</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">favoritesCount</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Number</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">default</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">tagList</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">[</span><span style="color:#B07D48;">String</span><span style="color:#999999;">],</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">default</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">null</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">author</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Schema</span><span style="color:#999999;">.</span><span style="color:#B07D48;">Types</span><span style="color:#999999;">.</span><span style="color:#B07D48;">ObjectId</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">ref</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">User</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">required</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#998418;">module</span><span style="color:#999999;">.</span><span style="color:#998418;">exports</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">articleSchema</span><span style="color:#999999;">;</span></span></code></pre></div>`,74),e=[o];function t(c,r,y,A,D,i){return n(),a("div",null,e)}const C=s(p,[["render",t]]);export{E as __pageData,C as default};
