import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.c53372a0.js";const E=JSON.parse('{"title":"网络拓扑图代码","description":"","frontmatter":{},"headers":[],"relativePath":"Problem/Graphical/Antv代码片段集锦.md","filePath":"Problem/Graphical/Antv代码片段集锦.md"}'),p={name:"Problem/Graphical/Antv代码片段集锦.md"},o=l(`<h1 id="网络拓扑图代码" tabindex="-1">网络拓扑图代码 <a class="header-anchor" href="#网络拓扑图代码" aria-label="Permalink to &quot;网络拓扑图代码&quot;">​</a></h1><h2 id="图实例化" tabindex="-1">图实例化 <a class="header-anchor" href="#图实例化" aria-label="Permalink to &quot;图实例化&quot;">​</a></h2><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">commonRegister</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">,</span><span style="color:#BD976A;">viewRegister</span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">./registerElements.js</span><span style="color:#C98A7D99;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">//1.初始化实例</span></span>
<span class="line"><span style="color:#BD976A;">initChart</span><span style="color:#DBD7CAEE;">() </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">halfWidth</span><span style="color:#DBD7CAEE;"> = </span><span style="color:#BD976A;">this</span><span style="color:#DBD7CAEE;">.</span><span style="color:#BD976A;">width</span><span style="color:#DBD7CAEE;"> / 2;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">halfHeight</span><span style="color:#DBD7CAEE;"> = </span><span style="color:#BD976A;">this</span><span style="color:#DBD7CAEE;">.</span><span style="color:#BD976A;">height</span><span style="color:#DBD7CAEE;"> / 2;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">if</span><span style="color:#DBD7CAEE;"> (!</span><span style="color:#BD976A;">this</span><span style="color:#DBD7CAEE;">.</span><span style="color:#BD976A;">graph</span><span style="color:#DBD7CAEE;">) {</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">commonRegister</span><span style="color:#DBD7CAEE;">()</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">viewRegister</span><span style="color:#DBD7CAEE;">()</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">toolbar</span><span style="color:#DBD7CAEE;"> = </span><span style="color:#BD976A;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">G6</span><span style="color:#DBD7CAEE;">.</span><span style="color:#BD976A;">ToolBar</span><span style="color:#DBD7CAEE;">({</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">position</span><span style="color:#DBD7CAEE;">: { </span><span style="color:#BD976A;">x</span><span style="color:#DBD7CAEE;">: 10</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">y</span><span style="color:#DBD7CAEE;">: 10 </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">getContent</span><span style="color:#DBD7CAEE;">: () =&gt; </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">         </span><span style="color:#BD976A;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">outDiv</span><span style="color:#DBD7CAEE;"> = </span><span style="color:#BD976A;">document</span><span style="color:#DBD7CAEE;">.</span><span style="color:#BD976A;">createElement</span><span style="color:#DBD7CAEE;">(&#39;</span><span style="color:#BD976A;">div</span><span style="color:#DBD7CAEE;">&#39;);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#BD976A;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">style</span><span style="color:#DBD7CAEE;"> = &#39;</span><span style="color:#BD976A;">cursor</span><span style="color:#DBD7CAEE;">: </span><span style="color:#BD976A;">pointer</span><span style="color:#DBD7CAEE;">;</span><span style="color:#BD976A;">vertical</span><span style="color:#DBD7CAEE;">-</span><span style="color:#BD976A;">align</span><span style="color:#DBD7CAEE;">: </span><span style="color:#BD976A;">middle</span><span style="color:#DBD7CAEE;">;</span><span style="color:#BD976A;">line</span><span style="color:#DBD7CAEE;">-</span><span style="color:#BD976A;">height</span><span style="color:#DBD7CAEE;">:24</span><span style="color:#BD976A;">px</span><span style="color:#DBD7CAEE;">;</span><span style="color:#BD976A;">font</span><span style="color:#DBD7CAEE;">-</span><span style="color:#BD976A;">size</span><span style="color:#DBD7CAEE;">:18</span><span style="color:#BD976A;">px</span><span style="color:#DBD7CAEE;">;&#39;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#BD976A;">outDiv</span><span style="color:#DBD7CAEE;">.</span><span style="color:#BD976A;">innerHTML</span><span style="color:#DBD7CAEE;"> = \`&lt;</span><span style="color:#BD976A;">ul</span><span style="color:#DBD7CAEE;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              &lt;</span><span style="color:#BD976A;">li</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">code</span><span style="color:#DBD7CAEE;">=&#39;</span><span style="color:#BD976A;">zoomOut</span><span style="color:#DBD7CAEE;">&#39; </span><span style="color:#BD976A;">style</span><span style="color:#DBD7CAEE;">=&quot;</span><span style="color:#BD976A;">$</span><span style="color:#DBD7CAEE;">{</span><span style="color:#BD976A;">style</span><span style="color:#666666;">}</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;"> class=</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#BD976A;">iconfont</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">icon</span><span style="color:#DBD7CAEE;">-</span><span style="color:#BD976A;">fangda</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;"> title=</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#BD976A;">放大</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">&gt;&lt;/li</span><span style="color:#FDAEB7;font-style:italic;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              &lt;</span><span style="color:#BD976A;">li</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">code</span><span style="color:#DBD7CAEE;">=</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">zoomIn</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">style</span><span style="color:#DBD7CAEE;">=</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">\${style}</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">class</span><span style="color:#DBD7CAEE;">=</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">iconfont icon-suoxiao</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">title</span><span style="color:#DBD7CAEE;">=</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">缩小</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#DBD7CAEE;">&gt;&lt;/</span><span style="color:#BD976A;">li</span><span style="color:#DBD7CAEE;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              &lt;</span><span style="color:#BD976A;">li</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">code</span><span style="color:#DBD7CAEE;">=</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">autoZoom</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">style</span><span style="color:#DBD7CAEE;">=</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">\${style}</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">class</span><span style="color:#DBD7CAEE;">=</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">iconfont icon-fitscreen24</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">title</span><span style="color:#DBD7CAEE;">=</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">居中</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#DBD7CAEE;">&gt;&lt;/</span><span style="color:#BD976A;">li</span><span style="color:#DBD7CAEE;">&gt;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            &lt;/</span><span style="color:#BD976A;">ul</span><span style="color:#DBD7CAEE;">&gt;</span><span style="color:#C98A7D99;">\`</span></span>
<span class="line"><span style="color:#C98A7D;">          return outDiv</span></span>
<span class="line"><span style="color:#C98A7D;">      },</span></span>
<span class="line"><span style="color:#C98A7D;">     handleClick: (code) =&gt; {</span></span>
<span class="line"><span style="color:#C98A7D;">          if (code === &#39;zoomOut&#39;) {</span></span>
<span class="line"><span style="color:#C98A7D;">             toolbar.zoomOut()</span></span>
<span class="line"><span style="color:#C98A7D;">          } else if (code === &#39;zoomIn&#39;) {</span></span>
<span class="line"><span style="color:#C98A7D;">             toolbar.zoomIn()</span></span>
<span class="line"><span style="color:#C98A7D;">          }else if(code === &#39;autoZoom&#39;){</span></span>
<span class="line"><span style="color:#C98A7D;">             toolbar.autoZoom()</span></span>
<span class="line"><span style="color:#C98A7D;">          }</span></span>
<span class="line"><span style="color:#C98A7D;">        }</span></span>
<span class="line"><span style="color:#C98A7D;">    });</span></span>
<span class="line"><span style="color:#C98A7D;">    this.graph = new G6.Graph({</span></span>
<span class="line"><span style="color:#C98A7D;">      container: &quot;topoChart&quot;,</span></span>
<span class="line"><span style="color:#C98A7D;">      width: this.width,</span></span>
<span class="line"><span style="color:#C98A7D;">      height: this.height,</span></span>
<span class="line"><span style="color:#C98A7D;">      fitView: true,</span></span>
<span class="line"><span style="color:#C98A7D;">      fitViewPadding: 100,</span></span>
<span class="line"><span style="color:#C98A7D;">      groupByTypes: false,</span></span>
<span class="line"><span style="color:#C98A7D;">      linkCenter: false,</span></span>
<span class="line"><span style="color:#C98A7D;">      layout: {</span></span>
<span class="line"><span style="color:#C98A7D;">        pipes: [</span></span>
<span class="line"><span style="color:#C98A7D;">          {</span></span>
<span class="line"><span style="color:#C98A7D;">            // 该子图所使用的布局类型</span></span>
<span class="line"><span style="color:#C98A7D;">            type: &quot;circular&quot;,</span></span>
<span class="line"><span style="color:#C98A7D;">            center: [halfWidth, halfHeight],</span></span>
<span class="line"><span style="color:#C98A7D;">            radius: 80,</span></span>
<span class="line"><span style="color:#C98A7D;">            nodesFilter: (node) =&gt; node.sysType === &quot;vpe&quot;,</span></span>
<span class="line"><span style="color:#C98A7D;">          },</span></span>
<span class="line"><span style="color:#C98A7D;">        ],</span></span>
<span class="line"><span style="color:#C98A7D;">      },</span></span>
<span class="line"><span style="color:#C98A7D;">      //交互行为相关配置</span></span>
<span class="line"><span style="color:#C98A7D;">      modes: {</span></span>
<span class="line"><span style="color:#C98A7D;">        default: [&quot;drag-canvas&quot;, &quot;zoom-canvas&quot;, {type: &quot;drag-combo&quot;, shouldEnd(e, parent) {</span></span>
<span class="line"><span style="color:#C98A7D;">          if(parent) {</span></span>
<span class="line"><span style="color:#C98A7D;">            return false;</span></span>
<span class="line"><span style="color:#C98A7D;">          }</span></span>
<span class="line"><span style="color:#C98A7D;">          return true;</span></span>
<span class="line"><span style="color:#C98A7D;">        }}],</span></span>
<span class="line"><span style="color:#C98A7D;">      },</span></span>
<span class="line"><span style="color:#C98A7D;">      plugins: [toolbar],</span></span>
<span class="line"><span style="color:#C98A7D;">      defaultNode: {</span></span>
<span class="line"><span style="color:#C98A7D;">        type: &quot;bubble&quot;,</span></span>
<span class="line"><span style="color:#C98A7D;">        labelCfg: {</span></span>
<span class="line"><span style="color:#C98A7D;">          position: &quot;center&quot;,</span></span>
<span class="line"><span style="color:#C98A7D;">          style: {</span></span>
<span class="line"><span style="color:#C98A7D;">            fill: &quot;white&quot;,</span></span>
<span class="line"><span style="color:#C98A7D;">            stroke: &quot;#fff&quot;,</span></span>
<span class="line"><span style="color:#C98A7D;">          },</span></span>
<span class="line"><span style="color:#C98A7D;">        },</span></span>
<span class="line"><span style="color:#C98A7D;">      },</span></span>
<span class="line"><span style="color:#C98A7D;">      defaultEdge: {</span></span>
<span class="line"><span style="color:#C98A7D;">        color: &quot;#888&quot;,</span></span>
<span class="line"><span style="color:#C98A7D;">        type: &quot;animate-line&quot;,</span></span>
<span class="line"><span style="color:#C98A7D;">      },</span></span>
<span class="line"><span style="color:#C98A7D;">      defaultCombo: {</span></span>
<span class="line"><span style="color:#C98A7D;">        padding: 1,</span></span>
<span class="line"><span style="color:#C98A7D;">        style: {</span></span>
<span class="line"><span style="color:#C98A7D;">          cursor: &quot;all-scroll&quot;,</span></span>
<span class="line"><span style="color:#C98A7D;">        },</span></span>
<span class="line"><span style="color:#C98A7D;">        labelCfg: {</span></span>
<span class="line"><span style="color:#C98A7D;">          style: {</span></span>
<span class="line"><span style="color:#C98A7D;">            opacity: 0,</span></span>
<span class="line"><span style="color:#C98A7D;">            fill: &quot;#303133&quot;,</span></span>
<span class="line"><span style="color:#C98A7D;">            fontSize: 12,</span></span>
<span class="line"><span style="color:#C98A7D;">            stroke: &quot;#fff&quot;,</span></span>
<span class="line"><span style="color:#C98A7D;">          },</span></span>
<span class="line"><span style="color:#C98A7D;">        },</span></span>
<span class="line"><span style="color:#C98A7D;">      },</span></span>
<span class="line"><span style="color:#C98A7D;">    });</span></span>
<span class="line"><span style="color:#C98A7D;">    //监听事件</span></span>
<span class="line"><span style="color:#C98A7D;">     this.graphBehaviors();</span></span>
<span class="line"><span style="color:#C98A7D;">  }</span></span>
<span class="line"><span style="color:#C98A7D;">},</span></span>
<span class="line"><span style="color:#C98A7D;">graphBehaviors(){</span></span>
<span class="line"><span style="color:#C98A7D;">    this.graph.on(&#39;node:click&#39;,this.debounce(this.eventHandle, 300));</span></span>
<span class="line"><span style="color:#C98A7D;"> //this.graph.on(&#39;edge:click&#39;... </span></span>
<span class="line"><span style="color:#C98A7D;">},</span></span>
<span class="line"><span style="color:#C98A7D;">debounce(fn, delay) {</span></span>
<span class="line"><span style="color:#C98A7D;">  const delays = delay || 300;</span></span>
<span class="line"><span style="color:#C98A7D;">  let timer;</span></span>
<span class="line"><span style="color:#C98A7D;">  return function() {</span></span>
<span class="line"><span style="color:#C98A7D;">    const th = this;</span></span>
<span class="line"><span style="color:#C98A7D;">    const args = arguments;</span></span>
<span class="line"><span style="color:#C98A7D;">    if (timer) {</span></span>
<span class="line"><span style="color:#C98A7D;">      clearTimeout(timer);</span></span>
<span class="line"><span style="color:#C98A7D;">    }</span></span>
<span class="line"><span style="color:#C98A7D;">    timer = setTimeout(function() {</span></span>
<span class="line"><span style="color:#C98A7D;">      timer = null;</span></span>
<span class="line"><span style="color:#C98A7D;">      fn.apply(th, args);</span></span>
<span class="line"><span style="color:#C98A7D;">    }, delays);</span></span>
<span class="line"><span style="color:#C98A7D;">  };</span></span>
<span class="line"><span style="color:#C98A7D;">},</span></span>
<span class="line"><span style="color:#C98A7D;">    //2.查询数据</span></span>
<span class="line"><span style="color:#C98A7D;">queryChartData(){</span></span>
<span class="line"><span style="color:#C98A7D;">    //处理数据</span></span>
<span class="line"><span style="color:#C98A7D;">    this.dealData(data)</span></span>
<span class="line"><span style="color:#C98A7D;">}</span></span>
<span class="line"><span style="color:#C98A7D;">//3.处理数据</span></span>
<span class="line"><span style="color:#C98A7D;">dealData(data ) {</span></span>
<span class="line"><span style="color:#C98A7D;">    //VPE节点</span></span>
<span class="line"><span style="color:#C98A7D;">    nodes =  ...</span></span>
<span class="line"><span style="color:#C98A7D;">    edges = ...</span></span>
<span class="line"><span style="color:#C98A7D;">    combos = ...</span></span>
<span class="line"><span style="color:#C98A7D;">    this.drawChart(...);</span></span>
<span class="line"><span style="color:#C98A7D;">}</span></span>
<span class="line"><span style="color:#C98A7D;">//4.渲染数据</span></span>
<span class="line"><span style="color:#C98A7D;">drawChart() {</span></span>
<span class="line"><span style="color:#C98A7D;">  this.graph.read({</span></span>
<span class="line"><span style="color:#C98A7D;">    nodes,</span></span>
<span class="line"><span style="color:#C98A7D;">    edges,</span></span>
<span class="line"><span style="color:#C98A7D;">    combos,</span></span>
<span class="line"><span style="color:#C98A7D;">  });</span></span>
<span class="line"><span style="color:#C98A7D;">},</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">commonRegister</span><span style="color:#393A34;"> </span><span style="color:#999999;">,</span><span style="color:#B07D48;">viewRegister</span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">./registerElements.js</span><span style="color:#B5695999;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">//1.初始化实例</span></span>
<span class="line"><span style="color:#B07D48;">initChart</span><span style="color:#393A34;">() </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">halfWidth</span><span style="color:#393A34;"> = </span><span style="color:#B07D48;">this</span><span style="color:#393A34;">.</span><span style="color:#B07D48;">width</span><span style="color:#393A34;"> / 2;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">halfHeight</span><span style="color:#393A34;"> = </span><span style="color:#B07D48;">this</span><span style="color:#393A34;">.</span><span style="color:#B07D48;">height</span><span style="color:#393A34;"> / 2;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">if</span><span style="color:#393A34;"> (!</span><span style="color:#B07D48;">this</span><span style="color:#393A34;">.</span><span style="color:#B07D48;">graph</span><span style="color:#393A34;">) {</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">commonRegister</span><span style="color:#393A34;">()</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">viewRegister</span><span style="color:#393A34;">()</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">toolbar</span><span style="color:#393A34;"> = </span><span style="color:#B07D48;">new</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">G6</span><span style="color:#393A34;">.</span><span style="color:#B07D48;">ToolBar</span><span style="color:#393A34;">({</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">position</span><span style="color:#393A34;">: { </span><span style="color:#B07D48;">x</span><span style="color:#393A34;">: 10</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">y</span><span style="color:#393A34;">: 10 </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">getContent</span><span style="color:#393A34;">: () =&gt; </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">         </span><span style="color:#B07D48;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">outDiv</span><span style="color:#393A34;"> = </span><span style="color:#B07D48;">document</span><span style="color:#393A34;">.</span><span style="color:#B07D48;">createElement</span><span style="color:#393A34;">(&#39;</span><span style="color:#B07D48;">div</span><span style="color:#393A34;">&#39;);</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#B07D48;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">style</span><span style="color:#393A34;"> = &#39;</span><span style="color:#B07D48;">cursor</span><span style="color:#393A34;">: </span><span style="color:#B07D48;">pointer</span><span style="color:#393A34;">;</span><span style="color:#B07D48;">vertical</span><span style="color:#393A34;">-</span><span style="color:#B07D48;">align</span><span style="color:#393A34;">: </span><span style="color:#B07D48;">middle</span><span style="color:#393A34;">;</span><span style="color:#B07D48;">line</span><span style="color:#393A34;">-</span><span style="color:#B07D48;">height</span><span style="color:#393A34;">:24</span><span style="color:#B07D48;">px</span><span style="color:#393A34;">;</span><span style="color:#B07D48;">font</span><span style="color:#393A34;">-</span><span style="color:#B07D48;">size</span><span style="color:#393A34;">:18</span><span style="color:#B07D48;">px</span><span style="color:#393A34;">;&#39;</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#B07D48;">outDiv</span><span style="color:#393A34;">.</span><span style="color:#B07D48;">innerHTML</span><span style="color:#393A34;"> = \`&lt;</span><span style="color:#B07D48;">ul</span><span style="color:#393A34;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">              &lt;</span><span style="color:#B07D48;">li</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">code</span><span style="color:#393A34;">=&#39;</span><span style="color:#B07D48;">zoomOut</span><span style="color:#393A34;">&#39; </span><span style="color:#B07D48;">style</span><span style="color:#393A34;">=&quot;</span><span style="color:#B07D48;">$</span><span style="color:#393A34;">{</span><span style="color:#B07D48;">style</span><span style="color:#999999;">}</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;"> class=</span><span style="color:#B5695999;">&quot;</span><span style="color:#B07D48;">iconfont</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">icon</span><span style="color:#393A34;">-</span><span style="color:#B07D48;">fangda</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;"> title=</span><span style="color:#B5695999;">&quot;</span><span style="color:#B07D48;">放大</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">&gt;&lt;/li</span><span style="color:#B31D28;font-style:italic;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">              &lt;</span><span style="color:#B07D48;">li</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">code</span><span style="color:#393A34;">=</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">zoomIn</span><span style="color:#B5695999;">&#39;</span><span style="color:#393A34;">  </span><span style="color:#B07D48;">style</span><span style="color:#393A34;">=</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">\${style}</span><span style="color:#B5695999;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">class</span><span style="color:#393A34;">=</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">iconfont icon-suoxiao</span><span style="color:#B5695999;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">title</span><span style="color:#393A34;">=</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">缩小</span><span style="color:#B5695999;">&quot;</span><span style="color:#393A34;">&gt;&lt;/</span><span style="color:#B07D48;">li</span><span style="color:#393A34;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">              &lt;</span><span style="color:#B07D48;">li</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">code</span><span style="color:#393A34;">=</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">autoZoom</span><span style="color:#B5695999;">&#39;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">style</span><span style="color:#393A34;">=</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">\${style}</span><span style="color:#B5695999;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">class</span><span style="color:#393A34;">=</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">iconfont icon-fitscreen24</span><span style="color:#B5695999;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">title</span><span style="color:#393A34;">=</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">居中</span><span style="color:#B5695999;">&quot;</span><span style="color:#393A34;">&gt;&lt;/</span><span style="color:#B07D48;">li</span><span style="color:#393A34;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">            &lt;/</span><span style="color:#B07D48;">ul</span><span style="color:#393A34;">&gt;</span><span style="color:#B5695999;">\`</span></span>
<span class="line"><span style="color:#B56959;">          return outDiv</span></span>
<span class="line"><span style="color:#B56959;">      },</span></span>
<span class="line"><span style="color:#B56959;">     handleClick: (code) =&gt; {</span></span>
<span class="line"><span style="color:#B56959;">          if (code === &#39;zoomOut&#39;) {</span></span>
<span class="line"><span style="color:#B56959;">             toolbar.zoomOut()</span></span>
<span class="line"><span style="color:#B56959;">          } else if (code === &#39;zoomIn&#39;) {</span></span>
<span class="line"><span style="color:#B56959;">             toolbar.zoomIn()</span></span>
<span class="line"><span style="color:#B56959;">          }else if(code === &#39;autoZoom&#39;){</span></span>
<span class="line"><span style="color:#B56959;">             toolbar.autoZoom()</span></span>
<span class="line"><span style="color:#B56959;">          }</span></span>
<span class="line"><span style="color:#B56959;">        }</span></span>
<span class="line"><span style="color:#B56959;">    });</span></span>
<span class="line"><span style="color:#B56959;">    this.graph = new G6.Graph({</span></span>
<span class="line"><span style="color:#B56959;">      container: &quot;topoChart&quot;,</span></span>
<span class="line"><span style="color:#B56959;">      width: this.width,</span></span>
<span class="line"><span style="color:#B56959;">      height: this.height,</span></span>
<span class="line"><span style="color:#B56959;">      fitView: true,</span></span>
<span class="line"><span style="color:#B56959;">      fitViewPadding: 100,</span></span>
<span class="line"><span style="color:#B56959;">      groupByTypes: false,</span></span>
<span class="line"><span style="color:#B56959;">      linkCenter: false,</span></span>
<span class="line"><span style="color:#B56959;">      layout: {</span></span>
<span class="line"><span style="color:#B56959;">        pipes: [</span></span>
<span class="line"><span style="color:#B56959;">          {</span></span>
<span class="line"><span style="color:#B56959;">            // 该子图所使用的布局类型</span></span>
<span class="line"><span style="color:#B56959;">            type: &quot;circular&quot;,</span></span>
<span class="line"><span style="color:#B56959;">            center: [halfWidth, halfHeight],</span></span>
<span class="line"><span style="color:#B56959;">            radius: 80,</span></span>
<span class="line"><span style="color:#B56959;">            nodesFilter: (node) =&gt; node.sysType === &quot;vpe&quot;,</span></span>
<span class="line"><span style="color:#B56959;">          },</span></span>
<span class="line"><span style="color:#B56959;">        ],</span></span>
<span class="line"><span style="color:#B56959;">      },</span></span>
<span class="line"><span style="color:#B56959;">      //交互行为相关配置</span></span>
<span class="line"><span style="color:#B56959;">      modes: {</span></span>
<span class="line"><span style="color:#B56959;">        default: [&quot;drag-canvas&quot;, &quot;zoom-canvas&quot;, {type: &quot;drag-combo&quot;, shouldEnd(e, parent) {</span></span>
<span class="line"><span style="color:#B56959;">          if(parent) {</span></span>
<span class="line"><span style="color:#B56959;">            return false;</span></span>
<span class="line"><span style="color:#B56959;">          }</span></span>
<span class="line"><span style="color:#B56959;">          return true;</span></span>
<span class="line"><span style="color:#B56959;">        }}],</span></span>
<span class="line"><span style="color:#B56959;">      },</span></span>
<span class="line"><span style="color:#B56959;">      plugins: [toolbar],</span></span>
<span class="line"><span style="color:#B56959;">      defaultNode: {</span></span>
<span class="line"><span style="color:#B56959;">        type: &quot;bubble&quot;,</span></span>
<span class="line"><span style="color:#B56959;">        labelCfg: {</span></span>
<span class="line"><span style="color:#B56959;">          position: &quot;center&quot;,</span></span>
<span class="line"><span style="color:#B56959;">          style: {</span></span>
<span class="line"><span style="color:#B56959;">            fill: &quot;white&quot;,</span></span>
<span class="line"><span style="color:#B56959;">            stroke: &quot;#fff&quot;,</span></span>
<span class="line"><span style="color:#B56959;">          },</span></span>
<span class="line"><span style="color:#B56959;">        },</span></span>
<span class="line"><span style="color:#B56959;">      },</span></span>
<span class="line"><span style="color:#B56959;">      defaultEdge: {</span></span>
<span class="line"><span style="color:#B56959;">        color: &quot;#888&quot;,</span></span>
<span class="line"><span style="color:#B56959;">        type: &quot;animate-line&quot;,</span></span>
<span class="line"><span style="color:#B56959;">      },</span></span>
<span class="line"><span style="color:#B56959;">      defaultCombo: {</span></span>
<span class="line"><span style="color:#B56959;">        padding: 1,</span></span>
<span class="line"><span style="color:#B56959;">        style: {</span></span>
<span class="line"><span style="color:#B56959;">          cursor: &quot;all-scroll&quot;,</span></span>
<span class="line"><span style="color:#B56959;">        },</span></span>
<span class="line"><span style="color:#B56959;">        labelCfg: {</span></span>
<span class="line"><span style="color:#B56959;">          style: {</span></span>
<span class="line"><span style="color:#B56959;">            opacity: 0,</span></span>
<span class="line"><span style="color:#B56959;">            fill: &quot;#303133&quot;,</span></span>
<span class="line"><span style="color:#B56959;">            fontSize: 12,</span></span>
<span class="line"><span style="color:#B56959;">            stroke: &quot;#fff&quot;,</span></span>
<span class="line"><span style="color:#B56959;">          },</span></span>
<span class="line"><span style="color:#B56959;">        },</span></span>
<span class="line"><span style="color:#B56959;">      },</span></span>
<span class="line"><span style="color:#B56959;">    });</span></span>
<span class="line"><span style="color:#B56959;">    //监听事件</span></span>
<span class="line"><span style="color:#B56959;">     this.graphBehaviors();</span></span>
<span class="line"><span style="color:#B56959;">  }</span></span>
<span class="line"><span style="color:#B56959;">},</span></span>
<span class="line"><span style="color:#B56959;">graphBehaviors(){</span></span>
<span class="line"><span style="color:#B56959;">    this.graph.on(&#39;node:click&#39;,this.debounce(this.eventHandle, 300));</span></span>
<span class="line"><span style="color:#B56959;"> //this.graph.on(&#39;edge:click&#39;... </span></span>
<span class="line"><span style="color:#B56959;">},</span></span>
<span class="line"><span style="color:#B56959;">debounce(fn, delay) {</span></span>
<span class="line"><span style="color:#B56959;">  const delays = delay || 300;</span></span>
<span class="line"><span style="color:#B56959;">  let timer;</span></span>
<span class="line"><span style="color:#B56959;">  return function() {</span></span>
<span class="line"><span style="color:#B56959;">    const th = this;</span></span>
<span class="line"><span style="color:#B56959;">    const args = arguments;</span></span>
<span class="line"><span style="color:#B56959;">    if (timer) {</span></span>
<span class="line"><span style="color:#B56959;">      clearTimeout(timer);</span></span>
<span class="line"><span style="color:#B56959;">    }</span></span>
<span class="line"><span style="color:#B56959;">    timer = setTimeout(function() {</span></span>
<span class="line"><span style="color:#B56959;">      timer = null;</span></span>
<span class="line"><span style="color:#B56959;">      fn.apply(th, args);</span></span>
<span class="line"><span style="color:#B56959;">    }, delays);</span></span>
<span class="line"><span style="color:#B56959;">  };</span></span>
<span class="line"><span style="color:#B56959;">},</span></span>
<span class="line"><span style="color:#B56959;">    //2.查询数据</span></span>
<span class="line"><span style="color:#B56959;">queryChartData(){</span></span>
<span class="line"><span style="color:#B56959;">    //处理数据</span></span>
<span class="line"><span style="color:#B56959;">    this.dealData(data)</span></span>
<span class="line"><span style="color:#B56959;">}</span></span>
<span class="line"><span style="color:#B56959;">//3.处理数据</span></span>
<span class="line"><span style="color:#B56959;">dealData(data ) {</span></span>
<span class="line"><span style="color:#B56959;">    //VPE节点</span></span>
<span class="line"><span style="color:#B56959;">    nodes =  ...</span></span>
<span class="line"><span style="color:#B56959;">    edges = ...</span></span>
<span class="line"><span style="color:#B56959;">    combos = ...</span></span>
<span class="line"><span style="color:#B56959;">    this.drawChart(...);</span></span>
<span class="line"><span style="color:#B56959;">}</span></span>
<span class="line"><span style="color:#B56959;">//4.渲染数据</span></span>
<span class="line"><span style="color:#B56959;">drawChart() {</span></span>
<span class="line"><span style="color:#B56959;">  this.graph.read({</span></span>
<span class="line"><span style="color:#B56959;">    nodes,</span></span>
<span class="line"><span style="color:#B56959;">    edges,</span></span>
<span class="line"><span style="color:#B56959;">    combos,</span></span>
<span class="line"><span style="color:#B56959;">  });</span></span>
<span class="line"><span style="color:#B56959;">},</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#80A665;">mounted</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">chartLoading</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">width</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">document</span><span style="color:#666666;">.</span><span style="color:#80A665;">getElementById</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">topoChart</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">).</span><span style="color:#BD976A;">scrollWidth</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">height</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">document</span><span style="color:#666666;">.</span><span style="color:#80A665;">getElementById</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">topoChart</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">).</span><span style="color:#BD976A;">scrollHeight</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">||</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">600</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#80A665;">initChart</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#80A665;">queryChartData</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">chartLoading</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">false</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//监听窗口大小变化,重绘网络拓扑</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">window</span><span style="color:#666666;">.</span><span style="color:#80A665;">addEventListener</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">resize</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">,</span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">rePaint</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#80A665;">beforeDestroy</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">graph</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">graph</span><span style="color:#666666;">.</span><span style="color:#80A665;">clear</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">graph</span><span style="color:#666666;">.</span><span style="color:#80A665;">destroy</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">data</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Object</span><span style="color:#666666;">.</span><span style="color:#80A665;">assign</span><span style="color:#666666;">(</span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">$data</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">$options</span><span style="color:#666666;">.</span><span style="color:#80A665;">data</span><span style="color:#666666;">());</span></span>
<span class="line"><span style="color:#666666;">},</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">mounted</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">chartLoading</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">width</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">document</span><span style="color:#999999;">.</span><span style="color:#59873A;">getElementById</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">topoChart</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">).</span><span style="color:#B07D48;">scrollWidth</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">height</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">document</span><span style="color:#999999;">.</span><span style="color:#59873A;">getElementById</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">topoChart</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">).</span><span style="color:#B07D48;">scrollHeight</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">||</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">600</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#59873A;">initChart</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#59873A;">queryChartData</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">chartLoading</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">false</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//监听窗口大小变化,重绘网络拓扑</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">window</span><span style="color:#999999;">.</span><span style="color:#59873A;">addEventListener</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">resize</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">,</span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">rePaint</span><span style="color:#393A34;"> </span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#59873A;">beforeDestroy</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">graph</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">graph</span><span style="color:#999999;">.</span><span style="color:#59873A;">clear</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">graph</span><span style="color:#999999;">.</span><span style="color:#59873A;">destroy</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">data</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Object</span><span style="color:#999999;">.</span><span style="color:#59873A;">assign</span><span style="color:#999999;">(</span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">$data</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">$options</span><span style="color:#999999;">.</span><span style="color:#59873A;">data</span><span style="color:#999999;">());</span></span>
<span class="line"><span style="color:#999999;">},</span></span></code></pre></div><h2 id="注册节点" tabindex="-1">注册节点 <a class="header-anchor" href="#注册节点" aria-label="Permalink to &quot;注册节点&quot;">​</a></h2><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#758575DD;">//registerElements.js</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">G6</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">from</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">@antv/g6</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#758575DD;">//共同节点注册</span></span>
<span class="line"><span style="color:#4D9375;">export</span><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">function</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">commonRegister</span><span style="color:#666666;">(){</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">// 注册实线动画</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">G6</span><span style="color:#666666;">.</span><span style="color:#80A665;">registerEdge</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">animate-line</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#80A665;">drawShape</span><span style="color:#666666;">(</span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">group</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">self</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">this</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">shapeStyle</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">self</span><span style="color:#666666;">.</span><span style="color:#80A665;">getShapeStyle</span><span style="color:#666666;">(</span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">shapeStyle</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Object</span><span style="color:#666666;">.</span><span style="color:#80A665;">assign</span><span style="color:#666666;">(</span><span style="color:#BD976A;">shapeStyle</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">opacity</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">strokeOpacity</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">keyShape</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">group</span><span style="color:#666666;">.</span><span style="color:#80A665;">addShape</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">path</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">attrs</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">shapeStyle</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">path-shape</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">keyShape</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#80A665;">afterDraw</span><span style="color:#666666;">(</span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">group</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">shape</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">group</span><span style="color:#666666;">.</span><span style="color:#80A665;">get</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">children</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">)[</span><span style="color:#4C9A91;">0</span><span style="color:#666666;">];</span></span>
<span class="line"><span style="color:#666666;">        </span><span style="color:#758575DD;">//线条动画</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">shape</span><span style="color:#666666;">.</span><span style="color:#80A665;">animate</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">(</span><span style="color:#BD976A;">ratio</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">opacity</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">ratio</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">*</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">.</span><span style="color:#BD976A;">style</span><span style="color:#666666;">.</span><span style="color:#BD976A;">opacity</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">strokeOpacity</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">ratio</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">*</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">.</span><span style="color:#BD976A;">style</span><span style="color:#666666;">.</span><span style="color:#BD976A;">strokeOpacity</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">opacity</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">ratio</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">||</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">opacity</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">strokeOpacity</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">ratio</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">||</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">strokeOpacity</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">};</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#B8A965;">duration</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">300</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">        </span><span style="color:#758575DD;">//箭头动画</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">startPoint</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">shape</span><span style="color:#666666;">.</span><span style="color:#80A665;">getPoint</span><span style="color:#666666;">(</span><span style="color:#4C9A91;">0</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">circle</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">group</span><span style="color:#666666;">.</span><span style="color:#80A665;">addShape</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">circle</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">attrs</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#B8A965;">x</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">startPoint</span><span style="color:#666666;">.</span><span style="color:#BD976A;">x</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#B8A965;">y</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">startPoint</span><span style="color:#666666;">.</span><span style="color:#BD976A;">y</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#B8A965;">fill</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">#1890ff</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#B8A965;">r</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">circle-shape</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">circle</span><span style="color:#666666;">.</span><span style="color:#80A665;">animate</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">(</span><span style="color:#BD976A;">ratio</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">tmpPoint</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">shape</span><span style="color:#666666;">.</span><span style="color:#80A665;">getPoint</span><span style="color:#666666;">(</span><span style="color:#BD976A;">ratio</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">x</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">tmpPoint</span><span style="color:#666666;">.</span><span style="color:#BD976A;">x</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">y</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">tmpPoint</span><span style="color:#666666;">.</span><span style="color:#BD976A;">y</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">};</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#B8A965;">repeat</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#B8A965;">duration</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">3000</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#80A665;">setState</span><span style="color:#666666;">(</span><span style="color:#BD976A;">name</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">value</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">item</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">shape</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">item</span><span style="color:#666666;">.</span><span style="color:#80A665;">get</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">keyShape</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">name</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">===</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">disappearing</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">&amp;&amp;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">value</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#BD976A;">shape</span><span style="color:#666666;">.</span><span style="color:#80A665;">animate</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">(</span><span style="color:#BD976A;">ratio</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                </span><span style="color:#B8A965;">opacity</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">ratio</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                </span><span style="color:#B8A965;">strokeOpacity</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">ratio</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#666666;">};</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">duration</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">200</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">else</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">name</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">===</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">dark</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">value</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">shape</span><span style="color:#666666;">.</span><span style="color:#80A665;">attr</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">opacity</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0.2</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#4D9375;">else</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">shape</span><span style="color:#666666;">.</span><span style="color:#80A665;">attr</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">opacity</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">line</span><span style="color:#C98A7D99;">&quot;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//注册iconfont节点</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">G6</span><span style="color:#666666;">.</span><span style="color:#80A665;">registerNode</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">iconfontHub</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">draw</span><span style="color:#666666;">(</span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">group</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">style</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">labelCfg</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">labelStyle</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">,</span><span style="color:#BD976A;">size</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">group</span><span style="color:#666666;">.</span><span style="color:#80A665;">addShape</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">circle</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">attrs</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">x</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">y</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">size</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">/</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">r</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">size</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">hub-bg-shape</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">//添加图标</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">keyShape</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">group</span><span style="color:#666666;">.</span><span style="color:#80A665;">addShape</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">text</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">attrs</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">x</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">y</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">size</span><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">/</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">fontFamily</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">iconfont</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">textAlign</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">center</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">text</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">.</span><span style="color:#BD976A;">text</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">fontSize</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Math</span><span style="color:#666666;">.</span><span style="color:#80A665;">round</span><span style="color:#666666;">(</span><span style="color:#BD976A;">size</span><span style="color:#666666;">),</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">...</span><span style="color:#BD976A;">style</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">hub-shape</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">//添加label</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">group</span><span style="color:#666666;">.</span><span style="color:#80A665;">addShape</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">text</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">attrs</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">x</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">y</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Math</span><span style="color:#666666;">.</span><span style="color:#80A665;">round</span><span style="color:#666666;">(</span><span style="color:#BD976A;">size</span><span style="color:#CB7676;">/</span><span style="color:#4C9A91;">4</span><span style="color:#666666;">),</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">textAlign</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">center</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">textBaseline</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">middle</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">text</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">.</span><span style="color:#BD976A;">label</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">...</span><span style="color:#BD976A;">labelStyle</span><span style="color:#666666;">.</span><span style="color:#BD976A;">style</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">hub-label</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">keyShape</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// afterDraw(cfg, group) {</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//   const shape = group.get(&#39;children&#39;)[0];</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//   shape.animate(</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//     (ratio) =&gt; {</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//       let fill = &#39;#C396ED&#39;</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//       if(ratio &gt; 0.6){</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//         fill = &#39;#FFCF8B&#39;</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//       }else if(ratio &gt; 0.3){</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//         fill = &#39;#C396ED&#39;</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//       }else {</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//         fill = &#39;#75D882&#39;</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//       }</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//       return {</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//         fill,</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//       };</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//     },</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//     {</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//       repeat: true,</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//       duration: 1500,</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//       // easing: &#39;easeCubic&#39;,</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//     },</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//   );</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// },</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//自定义节点和节点动画</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">G6</span><span style="color:#666666;">.</span><span style="color:#80A665;">registerNode</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">vpe-rect-animate</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">afterDraw</span><span style="color:#666666;">(</span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">group</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">width</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">height</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">stroke</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">radius</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#80A665;">getShapeStyle</span><span style="color:#666666;">(</span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">x</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">width</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">/</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">y</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">height</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">/</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">back1</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">group</span><span style="color:#666666;">.</span><span style="color:#80A665;">addShape</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">rect</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">zIndex</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#4C9A91;">3</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">attrs</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">x</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">x</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">y</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">y</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">width</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">width</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">height</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">height</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">fill</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">stroke</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">opacity</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0.6</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#BD976A;">radius</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">rback1-shape</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">back2</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">group</span><span style="color:#666666;">.</span><span style="color:#80A665;">addShape</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">rect</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">zIndex</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#4C9A91;">2</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">attrs</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">x</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">x</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">y</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">y</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">width</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">width</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">height</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">height</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">fill</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">stroke</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">opacity</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0.6</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#BD976A;">radius</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">rback2-shape</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">back3</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">group</span><span style="color:#666666;">.</span><span style="color:#80A665;">addShape</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">circle</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">zIndex</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#4C9A91;">1</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">attrs</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">x</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">x</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">y</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">y</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">width</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">width</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">height</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">height</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">fill</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">stroke</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">opacity</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0.6</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#BD976A;">radius</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">rback3-shape</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">group</span><span style="color:#666666;">.</span><span style="color:#80A665;">sort</span><span style="color:#666666;">();</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// Sort according to the zIndex</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">back1</span><span style="color:#666666;">.</span><span style="color:#80A665;">animate</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">width</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">width</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">10</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">height</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">height</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">10</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">opacity</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0.1</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">x</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">x</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">5</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">y</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">y</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">5</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">duration</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">3000</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">easing</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">easeCubic</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">delay</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#4C9A91;">300</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">repeat</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// repeat</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">);</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// no delay</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">back2</span><span style="color:#666666;">.</span><span style="color:#80A665;">animate</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">width</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">width</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">10</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">height</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">height</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">10</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">opacity</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0.1</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">x</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">x</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">5</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">y</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">y</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">5</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">duration</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">3000</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">easing</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">easeCubic</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">delay</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1000</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">repeat</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;">  </span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">);</span><span style="color:#DBD7CAEE;">  </span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">back3</span><span style="color:#666666;">.</span><span style="color:#80A665;">animate</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">width</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">width</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">10</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">height</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">height</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">10</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">opacity</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0.1</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">x</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">x</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">5</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">y</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">y</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">5</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">duration</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">3000</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">easing</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">easeCubic</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">delay</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2000</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">repeat</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// repeat</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">);</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;">// 3s delay</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">rect</span><span style="color:#C98A7D99;">&quot;</span></span>
<span class="line"><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#758575DD;">//弹窗特有节点注册</span></span>
<span class="line"><span style="color:#4D9375;">export</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">function</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">dialogRegister</span><span style="color:#666666;">(){</span></span>
<span class="line"><span style="color:#666666;">   </span><span style="color:#758575DD;">//注册iconfont节点</span></span>
<span class="line"><span style="color:#DBD7CAEE;">   </span><span style="color:#BD976A;">G6</span><span style="color:#666666;">.</span><span style="color:#80A665;">registerNode</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">iconfontCpe</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">draw</span><span style="color:#666666;">(</span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">group</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">style</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">labelCfg</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">labelStyle</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">//添加图标</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">keyShape</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">group</span><span style="color:#666666;">.</span><span style="color:#80A665;">addShape</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">text</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">attrs</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">x</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">y</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">fontFamily</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">iconfont</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">textAlign</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">center</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">textBaseline</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">middle</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">text</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">.</span><span style="color:#BD976A;">text</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">fontSize</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">.</span><span style="color:#BD976A;">size</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">...</span><span style="color:#BD976A;">style</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">cpe-shape</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">//添加label</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">group</span><span style="color:#666666;">.</span><span style="color:#80A665;">addShape</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">text</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">attrs</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">x</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">y</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">10</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">textAlign</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">center</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">text</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">.</span><span style="color:#BD976A;">label</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">...</span><span style="color:#BD976A;">labelStyle</span><span style="color:#666666;">.</span><span style="color:#BD976A;">style</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">cpe-label</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">keyShape</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#80A665;">afterDraw</span><span style="color:#666666;">(</span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">group</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">shape</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">group</span><span style="color:#666666;">.</span><span style="color:#80A665;">get</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">children</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">)[</span><span style="color:#4C9A91;">0</span><span style="color:#666666;">];</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">shape</span><span style="color:#666666;">.</span><span style="color:#80A665;">animate</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">(</span><span style="color:#BD976A;">ratio</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">text</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C99076;">\\ue604</span><span style="color:#C98A7D99;">&#39;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#4D9375;">if</span><span style="color:#666666;">(</span><span style="color:#BD976A;">ratio</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0.6</span><span style="color:#666666;">){</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">text</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C99076;">\\ue604</span><span style="color:#C98A7D99;">&#39;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">}</span><span style="color:#4D9375;">else</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">if</span><span style="color:#666666;">(</span><span style="color:#BD976A;">ratio</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0.3</span><span style="color:#666666;">){</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">text</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C99076;">\\ue606</span><span style="color:#C98A7D99;">&#39;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">}</span><span style="color:#4D9375;">else</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">text</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C99076;">\\ue605</span><span style="color:#C98A7D99;">&#39;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">text</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">};</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">repeat</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">duration</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1500</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">delay</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">3000</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#666666;">          </span><span style="color:#758575DD;">// easing: &#39;easeCubic&#39;,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//注册虚线动画</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">// G6.registerEdge(&quot;vpn-line-dash&quot;,</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//   {</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//     afterDraw(cfg, group) {</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//       const shape = group.get(&quot;children&quot;)[0];</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//       let index = 0;</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//       shape.animate(</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//         () =&gt; {</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//           index = index+0.2;</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//           if (index &gt; 9) {</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//             index = 0;</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//           }</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//           const res = {</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//             lineDash: [4, 4],</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//             lineDashOffset: -index,</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//           };</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//           return res;</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//         },</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//         {</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//           repeat: true,</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//           duration:10000,</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//         }</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//       );</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//     },</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//   },</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//   &quot;line&quot;</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">// );</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">//网络拓扑总览特有节点注册</span></span>
<span class="line"><span style="color:#4D9375;">export</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">function</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">viewRegister</span><span style="color:#666666;">(){</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//注册iconfont combos</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">// G6.registerCombo(&quot;cloudCombo&quot;,</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//   {</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//     drawShape: function drawShape(cfg, group) {</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//       // const {  labelCfg: labelStyle   } = cfg;</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//       const keyShape = group.addShape(&quot;text&quot;, { </span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//         attrs: {</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//           y: 0,</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//           x: 0,</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//           fill: cfg.style.fill,</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//           stroke: cfg.style.fill,</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//           fontFamily: &quot;iconfont&quot;,</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//           textAlign: &quot;center&quot;,</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//           textBaseline: &quot;middle&quot;,</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//           text: &quot;\\ue603&quot;,</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//           fontSize: 320,</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//           zIndex: 8,</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//         },</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//         name: &quot;cloud&quot;,</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//       });</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//           //添加label</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//     // group.addShape(&quot;text&quot;, {</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//     //   attrs: {</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//     //     x: 0,</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//     //     y: -80,</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//     //     textAlign: &quot;center&quot;,</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//     //     textBaseline: &quot;middle&quot;,</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//     //     text: cfg.label,</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//     //     ...labelStyle.style,</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//     //   },</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//     //   name: &quot;hubCombo-label&quot;,</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//     // });</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//       return keyShape;</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//     },</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//   },</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">//   &quot;cicle&quot;</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">// );</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//注册SVG combo</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">G6</span><span style="color:#666666;">.</span><span style="color:#80A665;">registerCombo</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">cloudCombo</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#80A665;">drawShape</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">function</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">drawShape</span><span style="color:#666666;">(</span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">group</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">labelCfg</span><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">str</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">M 448 102.875 c 0 -82.09 -56.678 -150.9 -132.996 -169.48 C 311.762 -195.305 206.546 -298.667 77.142 -298.667 c -75.792 0 -143.266 35.494 -186.854 90.732 c -24.442 -31.598 -62.69 -51.96 -105.708 -51.96 c -73.81 0 -133.642 59.874 -133.642 133.722 c 0 6.436 0.48 12.76 1.364 18.954 c -11.222 -2.024 -22.766 -3.138 -34.57 -3.138 C -489.266 -110.359 -576 -23.5707 -576 83.4853 C -576 190.547 -489.266 277.333 -382.27 277.333 l 656.262 0 l 0 -0.012 C 370.13 277.137 448 199.109 448 102.875 Z</span><span style="color:#C98A7D99;">&#39;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">pathArr</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#BD976A;">str</span><span style="color:#666666;">.</span><span style="color:#80A665;">split</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">opath</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">[]</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">pathArr</span><span style="color:#666666;">.</span><span style="color:#80A665;">forEach</span><span style="color:#666666;">(</span><span style="color:#BD976A;">item</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#4D9375;">if</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">/</span><span style="color:#666666;">[</span><span style="color:#C99076;">a-zA-Z</span><span style="color:#666666;">]</span><span style="color:#C98A7D99;">/</span><span style="color:#666666;">.</span><span style="color:#80A665;">test</span><span style="color:#666666;">(</span><span style="color:#BD976A;">item</span><span style="color:#666666;">)){</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#BD976A;">opath</span><span style="color:#666666;">.</span><span style="color:#80A665;">push</span><span style="color:#666666;">([</span><span style="color:#BD976A;">item</span><span style="color:#666666;">])</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">}</span><span style="color:#4D9375;">else</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#BD976A;">opath</span><span style="color:#666666;">[</span><span style="color:#BD976A;">opath</span><span style="color:#666666;">.</span><span style="color:#B8A965;">length</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1</span><span style="color:#666666;">].</span><span style="color:#80A665;">push</span><span style="color:#666666;">(</span><span style="color:#80A665;">parseFloat</span><span style="color:#666666;">(</span><span style="color:#BD976A;">item</span><span style="color:#666666;">))</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#BD976A;">opath</span><span style="color:#666666;">.</span><span style="color:#80A665;">forEach</span><span style="color:#666666;">(</span><span style="color:#BD976A;">item</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">item</span><span style="color:#666666;">.</span><span style="color:#80A665;">forEach</span><span style="color:#666666;">((</span><span style="color:#BD976A;">p</span><span style="color:#666666;">,</span><span style="color:#BD976A;">i</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">i</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                </span><span style="color:#BD976A;">item</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">[</span><span style="color:#BD976A;">i</span><span style="color:#666666;">]</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">item</span><span style="color:#666666;">[</span><span style="color:#BD976A;">i</span><span style="color:#666666;">]</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">/</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">3</span><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">keyShape</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">group</span><span style="color:#666666;">.</span><span style="color:#80A665;">addShape</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">path</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#B8A965;">attrs</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#666666;">...</span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">.</span><span style="color:#BD976A;">style</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">width</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">.</span><span style="color:#BD976A;">style</span><span style="color:#666666;">.</span><span style="color:#BD976A;">width</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">height</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">.</span><span style="color:#BD976A;">style</span><span style="color:#666666;">.</span><span style="color:#BD976A;">height</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">path</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">opath</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#B8A965;">id</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">.</span><span style="color:#BD976A;">id</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">cloud</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#BD976A;">group</span><span style="color:#666666;">.</span><span style="color:#80A665;">addShape</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">text</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#B8A965;">attrs</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">x</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">y</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">-</span><span style="color:#4C9A91;">100</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">textAlign</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">center</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">text</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">cfg</span><span style="color:#666666;">.</span><span style="color:#BD976A;">label</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">              </span><span style="color:#B8A965;">fill</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">#303133</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">hubCombo-label</span><span style="color:#C98A7D99;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">keyShape</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#C98A7D99;">&quot;</span><span style="color:#C98A7D;">single-combo</span><span style="color:#C98A7D99;">&quot;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">   </span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;"> </span><span style="color:#758575DD;">//节点文本溢出省略处理</span></span>
<span class="line"><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">export</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">function</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">fittingString</span><span style="color:#666666;">(</span><span style="color:#BD976A;">str</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">maxWidth</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">fontSize</span><span style="color:#666666;">){</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">ellipsis</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">...</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">ellipsisLength</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">G6</span><span style="color:#666666;">.</span><span style="color:#BD976A;">Util</span><span style="color:#666666;">.</span><span style="color:#80A665;">getTextSize</span><span style="color:#666666;">(</span><span style="color:#BD976A;">ellipsis</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">fontSize</span><span style="color:#666666;">)[</span><span style="color:#4C9A91;">0</span><span style="color:#666666;">];</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">currentWidth</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">let</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">res</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">str</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">pattern</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">RegExp</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">[</span><span style="color:#C99076;">\\u4E00</span><span style="color:#C98A7D;">-</span><span style="color:#C99076;">\\u9FA5</span><span style="color:#C98A7D;">]+</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#666666;">);</span><span style="color:#DBD7CAEE;">  </span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#BD976A;">str</span><span style="color:#666666;">.</span><span style="color:#80A665;">split</span><span style="color:#666666;">(</span><span style="color:#C98A7D99;">&#39;&#39;</span><span style="color:#666666;">).</span><span style="color:#80A665;">forEach</span><span style="color:#666666;">((</span><span style="color:#BD976A;">letter</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">i</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">currentWidth</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">maxWidth</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">ellipsisLength</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">return</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">pattern</span><span style="color:#666666;">.</span><span style="color:#80A665;">test</span><span style="color:#666666;">(</span><span style="color:#BD976A;">letter</span><span style="color:#666666;">))</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">currentWidth</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">fontSize</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">else</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">currentWidth</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">G6</span><span style="color:#666666;">.</span><span style="color:#BD976A;">Util</span><span style="color:#666666;">.</span><span style="color:#80A665;">getLetterWidth</span><span style="color:#666666;">(</span><span style="color:#BD976A;">letter</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">fontSize</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">currentWidth</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">maxWidth</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">ellipsisLength</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">res</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">\`</span><span style="color:#666666;">\${</span><span style="color:#C98A7D;">str</span><span style="color:#666666;">.</span><span style="color:#80A665;">substr</span><span style="color:#666666;">(</span><span style="color:#4C9A91;">0</span><span style="color:#666666;">,</span><span style="color:#C98A7D;"> i</span><span style="color:#666666;">)</span><span style="color:#666666;">}\${</span><span style="color:#C98A7D;">ellipsis</span><span style="color:#666666;">}</span><span style="color:#C98A7D99;">\`</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">});</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">res</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">}</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">//registerElements.js</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">G6</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">from</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">@antv/g6</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#A0ADA0;">//共同节点注册</span></span>
<span class="line"><span style="color:#1E754F;">export</span><span style="color:#393A34;">  </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#59873A;">commonRegister</span><span style="color:#999999;">(){</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// 注册实线动画</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">G6</span><span style="color:#999999;">.</span><span style="color:#59873A;">registerEdge</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">animate-line</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#59873A;">drawShape</span><span style="color:#999999;">(</span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">group</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">self</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">shapeStyle</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">self</span><span style="color:#999999;">.</span><span style="color:#59873A;">getShapeStyle</span><span style="color:#999999;">(</span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">shapeStyle</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Object</span><span style="color:#999999;">.</span><span style="color:#59873A;">assign</span><span style="color:#999999;">(</span><span style="color:#B07D48;">shapeStyle</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">opacity</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">strokeOpacity</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">keyShape</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">group</span><span style="color:#999999;">.</span><span style="color:#59873A;">addShape</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">path</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">attrs</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">shapeStyle</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">path-shape</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">keyShape</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#59873A;">afterDraw</span><span style="color:#999999;">(</span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">group</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">shape</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">group</span><span style="color:#999999;">.</span><span style="color:#59873A;">get</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">children</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">)[</span><span style="color:#2F798A;">0</span><span style="color:#999999;">];</span></span>
<span class="line"><span style="color:#999999;">        </span><span style="color:#A0ADA0;">//线条动画</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">shape</span><span style="color:#999999;">.</span><span style="color:#59873A;">animate</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">(</span><span style="color:#B07D48;">ratio</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">opacity</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">ratio</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">*</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">.</span><span style="color:#B07D48;">style</span><span style="color:#999999;">.</span><span style="color:#B07D48;">opacity</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">strokeOpacity</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">ratio</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">*</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">.</span><span style="color:#B07D48;">style</span><span style="color:#999999;">.</span><span style="color:#B07D48;">strokeOpacity</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">opacity</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">ratio</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">||</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">opacity</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">strokeOpacity</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">ratio</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">||</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">strokeOpacity</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">};</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#998418;">duration</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">300</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#999999;">        </span><span style="color:#A0ADA0;">//箭头动画</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">startPoint</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">shape</span><span style="color:#999999;">.</span><span style="color:#59873A;">getPoint</span><span style="color:#999999;">(</span><span style="color:#2F798A;">0</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">circle</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">group</span><span style="color:#999999;">.</span><span style="color:#59873A;">addShape</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">circle</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">attrs</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#998418;">x</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">startPoint</span><span style="color:#999999;">.</span><span style="color:#B07D48;">x</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#998418;">y</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">startPoint</span><span style="color:#999999;">.</span><span style="color:#B07D48;">y</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#998418;">fill</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">#1890ff</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#998418;">r</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">circle-shape</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">circle</span><span style="color:#999999;">.</span><span style="color:#59873A;">animate</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">(</span><span style="color:#B07D48;">ratio</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">tmpPoint</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">shape</span><span style="color:#999999;">.</span><span style="color:#59873A;">getPoint</span><span style="color:#999999;">(</span><span style="color:#B07D48;">ratio</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">x</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">tmpPoint</span><span style="color:#999999;">.</span><span style="color:#B07D48;">x</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">y</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">tmpPoint</span><span style="color:#999999;">.</span><span style="color:#B07D48;">y</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">};</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#998418;">repeat</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#998418;">duration</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">3000</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#59873A;">setState</span><span style="color:#999999;">(</span><span style="color:#B07D48;">name</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">value</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">item</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">shape</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">item</span><span style="color:#999999;">.</span><span style="color:#59873A;">get</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">keyShape</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">name</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">===</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">disappearing</span><span style="color:#B5695999;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&amp;&amp;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">value</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#B07D48;">shape</span><span style="color:#999999;">.</span><span style="color:#59873A;">animate</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">(</span><span style="color:#B07D48;">ratio</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">                </span><span style="color:#998418;">opacity</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">ratio</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">                </span><span style="color:#998418;">strokeOpacity</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">ratio</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#999999;">};</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">duration</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">200</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">else</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">name</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">===</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">dark</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">value</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">shape</span><span style="color:#999999;">.</span><span style="color:#59873A;">attr</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">opacity</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0.2</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#1E754F;">else</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">shape</span><span style="color:#999999;">.</span><span style="color:#59873A;">attr</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">opacity</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">line</span><span style="color:#B5695999;">&quot;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//注册iconfont节点</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">G6</span><span style="color:#999999;">.</span><span style="color:#59873A;">registerNode</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">iconfontHub</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">draw</span><span style="color:#999999;">(</span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">group</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">style</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">labelCfg</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">labelStyle</span><span style="color:#393A34;"> </span><span style="color:#999999;">,</span><span style="color:#B07D48;">size</span><span style="color:#393A34;"> </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">group</span><span style="color:#999999;">.</span><span style="color:#59873A;">addShape</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">circle</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">attrs</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">x</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">y</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">size</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">/</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">r</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">size</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">hub-bg-shape</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">//添加图标</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">keyShape</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">group</span><span style="color:#999999;">.</span><span style="color:#59873A;">addShape</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">text</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">attrs</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">x</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">y</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">size</span><span style="color:#393A34;">  </span><span style="color:#AB5959;">/</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">fontFamily</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">iconfont</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">textAlign</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">center</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">text</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">.</span><span style="color:#B07D48;">text</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">fontSize</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Math</span><span style="color:#999999;">.</span><span style="color:#59873A;">round</span><span style="color:#999999;">(</span><span style="color:#B07D48;">size</span><span style="color:#999999;">),</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">...</span><span style="color:#B07D48;">style</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">hub-shape</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">//添加label</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">group</span><span style="color:#999999;">.</span><span style="color:#59873A;">addShape</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">text</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">attrs</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">x</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">y</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Math</span><span style="color:#999999;">.</span><span style="color:#59873A;">round</span><span style="color:#999999;">(</span><span style="color:#B07D48;">size</span><span style="color:#AB5959;">/</span><span style="color:#2F798A;">4</span><span style="color:#999999;">),</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">textAlign</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">center</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">textBaseline</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">middle</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">text</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">.</span><span style="color:#B07D48;">label</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">...</span><span style="color:#B07D48;">labelStyle</span><span style="color:#999999;">.</span><span style="color:#B07D48;">style</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">hub-label</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">keyShape</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// afterDraw(cfg, group) {</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//   const shape = group.get(&#39;children&#39;)[0];</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//   shape.animate(</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//     (ratio) =&gt; {</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//       let fill = &#39;#C396ED&#39;</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//       if(ratio &gt; 0.6){</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//         fill = &#39;#FFCF8B&#39;</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//       }else if(ratio &gt; 0.3){</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//         fill = &#39;#C396ED&#39;</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//       }else {</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//         fill = &#39;#75D882&#39;</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//       }</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//       return {</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//         fill,</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//       };</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//     },</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//     {</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//       repeat: true,</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//       duration: 1500,</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//       // easing: &#39;easeCubic&#39;,</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//     },</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//   );</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// },</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//自定义节点和节点动画</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">G6</span><span style="color:#999999;">.</span><span style="color:#59873A;">registerNode</span><span style="color:#999999;">(</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">vpe-rect-animate</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">afterDraw</span><span style="color:#999999;">(</span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">group</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">width</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">height</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">stroke</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">radius</span><span style="color:#393A34;"> </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#59873A;">getShapeStyle</span><span style="color:#999999;">(</span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">x</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#B07D48;">width</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">/</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">y</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#B07D48;">height</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">/</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">back1</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">group</span><span style="color:#999999;">.</span><span style="color:#59873A;">addShape</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">rect</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">zIndex</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#2F798A;">3</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">attrs</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">x</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">x</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">y</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">y</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">width</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">width</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">height</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">height</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">fill</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">stroke</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">opacity</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0.6</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#B07D48;">radius</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">rback1-shape</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">back2</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">group</span><span style="color:#999999;">.</span><span style="color:#59873A;">addShape</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">rect</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">zIndex</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#2F798A;">2</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">attrs</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">x</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">x</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">y</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">y</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">width</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">width</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">height</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">height</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">fill</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">stroke</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">opacity</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0.6</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#B07D48;">radius</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">rback2-shape</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">back3</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">group</span><span style="color:#999999;">.</span><span style="color:#59873A;">addShape</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">circle</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">zIndex</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#2F798A;">1</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">attrs</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">x</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">x</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">y</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">y</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">width</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">width</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">height</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">height</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">fill</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">stroke</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">opacity</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0.6</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#B07D48;">radius</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">rback3-shape</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">group</span><span style="color:#999999;">.</span><span style="color:#59873A;">sort</span><span style="color:#999999;">();</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// Sort according to the zIndex</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">back1</span><span style="color:#999999;">.</span><span style="color:#59873A;">animate</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">width</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">width</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">10</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">height</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">height</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">10</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">opacity</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0.1</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">x</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">x</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">5</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">y</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">y</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">5</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">duration</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">3000</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">easing</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">easeCubic</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">delay</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#2F798A;">300</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">repeat</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// repeat</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">);</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// no delay</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">back2</span><span style="color:#999999;">.</span><span style="color:#59873A;">animate</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">width</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">width</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">10</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">height</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">height</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">10</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">opacity</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0.1</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">x</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">x</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">5</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">y</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">y</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">5</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">duration</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">3000</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">easing</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">easeCubic</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">delay</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1000</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">repeat</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">,</span><span style="color:#393A34;">  </span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">);</span><span style="color:#393A34;">  </span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">back3</span><span style="color:#999999;">.</span><span style="color:#59873A;">animate</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">width</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">width</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">10</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">height</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">height</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">10</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">opacity</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0.1</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">x</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">x</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">5</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">y</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">y</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">5</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">duration</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">3000</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">easing</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">easeCubic</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">delay</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2000</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">repeat</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// repeat</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">);</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// 3s delay</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">rect</span><span style="color:#B5695999;">&quot;</span></span>
<span class="line"><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#A0ADA0;">//弹窗特有节点注册</span></span>
<span class="line"><span style="color:#1E754F;">export</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#59873A;">dialogRegister</span><span style="color:#999999;">(){</span></span>
<span class="line"><span style="color:#999999;">   </span><span style="color:#A0ADA0;">//注册iconfont节点</span></span>
<span class="line"><span style="color:#393A34;">   </span><span style="color:#B07D48;">G6</span><span style="color:#999999;">.</span><span style="color:#59873A;">registerNode</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">iconfontCpe</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">draw</span><span style="color:#999999;">(</span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">group</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">style</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">labelCfg</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">labelStyle</span><span style="color:#393A34;"> </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">//添加图标</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">keyShape</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">group</span><span style="color:#999999;">.</span><span style="color:#59873A;">addShape</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">text</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">attrs</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">x</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">y</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">fontFamily</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">iconfont</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">textAlign</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">center</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">textBaseline</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">middle</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">text</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">.</span><span style="color:#B07D48;">text</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">fontSize</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">.</span><span style="color:#B07D48;">size</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">...</span><span style="color:#B07D48;">style</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">cpe-shape</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">//添加label</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">group</span><span style="color:#999999;">.</span><span style="color:#59873A;">addShape</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">text</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">attrs</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">x</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">y</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">10</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">textAlign</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">center</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">text</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">.</span><span style="color:#B07D48;">label</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">...</span><span style="color:#B07D48;">labelStyle</span><span style="color:#999999;">.</span><span style="color:#B07D48;">style</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">cpe-label</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">  </span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">keyShape</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#59873A;">afterDraw</span><span style="color:#999999;">(</span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">group</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">shape</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">group</span><span style="color:#999999;">.</span><span style="color:#59873A;">get</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">children</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">)[</span><span style="color:#2F798A;">0</span><span style="color:#999999;">];</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">shape</span><span style="color:#999999;">.</span><span style="color:#59873A;">animate</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">(</span><span style="color:#B07D48;">ratio</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">text</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#A65E2B;">\\ue604</span><span style="color:#B5695999;">&#39;</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#1E754F;">if</span><span style="color:#999999;">(</span><span style="color:#B07D48;">ratio</span><span style="color:#393A34;"> </span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0.6</span><span style="color:#999999;">){</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">text</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#A65E2B;">\\ue604</span><span style="color:#B5695999;">&#39;</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">}</span><span style="color:#1E754F;">else</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">if</span><span style="color:#999999;">(</span><span style="color:#B07D48;">ratio</span><span style="color:#393A34;"> </span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0.3</span><span style="color:#999999;">){</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">text</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#A65E2B;">\\ue606</span><span style="color:#B5695999;">&#39;</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">}</span><span style="color:#1E754F;">else</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">text</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#A65E2B;">\\ue605</span><span style="color:#B5695999;">&#39;</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">text</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">};</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">repeat</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">duration</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1500</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">delay</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">3000</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#999999;">          </span><span style="color:#A0ADA0;">// easing: &#39;easeCubic&#39;,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//注册虚线动画</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// G6.registerEdge(&quot;vpn-line-dash&quot;,</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//   {</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//     afterDraw(cfg, group) {</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//       const shape = group.get(&quot;children&quot;)[0];</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//       let index = 0;</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//       shape.animate(</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//         () =&gt; {</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//           index = index+0.2;</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//           if (index &gt; 9) {</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//             index = 0;</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//           }</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//           const res = {</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//             lineDash: [4, 4],</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//             lineDashOffset: -index,</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//           };</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//           return res;</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//         },</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//         {</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//           repeat: true,</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//           duration:10000,</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//         }</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//       );</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//     },</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//   },</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//   &quot;line&quot;</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// );</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">//网络拓扑总览特有节点注册</span></span>
<span class="line"><span style="color:#1E754F;">export</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#59873A;">viewRegister</span><span style="color:#999999;">(){</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//注册iconfont combos</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// G6.registerCombo(&quot;cloudCombo&quot;,</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//   {</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//     drawShape: function drawShape(cfg, group) {</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//       // const {  labelCfg: labelStyle   } = cfg;</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//       const keyShape = group.addShape(&quot;text&quot;, { </span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//         attrs: {</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//           y: 0,</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//           x: 0,</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//           fill: cfg.style.fill,</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//           stroke: cfg.style.fill,</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//           fontFamily: &quot;iconfont&quot;,</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//           textAlign: &quot;center&quot;,</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//           textBaseline: &quot;middle&quot;,</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//           text: &quot;\\ue603&quot;,</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//           fontSize: 320,</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//           zIndex: 8,</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//         },</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//         name: &quot;cloud&quot;,</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//       });</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//           //添加label</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//     // group.addShape(&quot;text&quot;, {</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//     //   attrs: {</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//     //     x: 0,</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//     //     y: -80,</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//     //     textAlign: &quot;center&quot;,</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//     //     textBaseline: &quot;middle&quot;,</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//     //     text: cfg.label,</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//     //     ...labelStyle.style,</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//     //   },</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//     //   name: &quot;hubCombo-label&quot;,</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//     // });</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//       return keyShape;</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//     },</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//   },</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">//   &quot;cicle&quot;</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// );</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//注册SVG combo</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">G6</span><span style="color:#999999;">.</span><span style="color:#59873A;">registerCombo</span><span style="color:#999999;">(</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">cloudCombo</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#59873A;">drawShape</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#59873A;">drawShape</span><span style="color:#999999;">(</span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">group</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">labelCfg</span><span style="color:#393A34;">  </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">str</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">M 448 102.875 c 0 -82.09 -56.678 -150.9 -132.996 -169.48 C 311.762 -195.305 206.546 -298.667 77.142 -298.667 c -75.792 0 -143.266 35.494 -186.854 90.732 c -24.442 -31.598 -62.69 -51.96 -105.708 -51.96 c -73.81 0 -133.642 59.874 -133.642 133.722 c 0 6.436 0.48 12.76 1.364 18.954 c -11.222 -2.024 -22.766 -3.138 -34.57 -3.138 C -489.266 -110.359 -576 -23.5707 -576 83.4853 C -576 190.547 -489.266 277.333 -382.27 277.333 l 656.262 0 l 0 -0.012 C 370.13 277.137 448 199.109 448 102.875 Z</span><span style="color:#B5695999;">&#39;</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">pathArr</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#B07D48;">str</span><span style="color:#999999;">.</span><span style="color:#59873A;">split</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">opath</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#999999;">[]</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">pathArr</span><span style="color:#999999;">.</span><span style="color:#59873A;">forEach</span><span style="color:#999999;">(</span><span style="color:#B07D48;">item</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#1E754F;">if</span><span style="color:#999999;">(</span><span style="color:#B5695999;">/</span><span style="color:#999999;">[</span><span style="color:#A65E2B;">a-zA-Z</span><span style="color:#999999;">]</span><span style="color:#B5695999;">/</span><span style="color:#999999;">.</span><span style="color:#59873A;">test</span><span style="color:#999999;">(</span><span style="color:#B07D48;">item</span><span style="color:#999999;">)){</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#B07D48;">opath</span><span style="color:#999999;">.</span><span style="color:#59873A;">push</span><span style="color:#999999;">([</span><span style="color:#B07D48;">item</span><span style="color:#999999;">])</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">}</span><span style="color:#1E754F;">else</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#B07D48;">opath</span><span style="color:#999999;">[</span><span style="color:#B07D48;">opath</span><span style="color:#999999;">.</span><span style="color:#998418;">length</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1</span><span style="color:#999999;">].</span><span style="color:#59873A;">push</span><span style="color:#999999;">(</span><span style="color:#59873A;">parseFloat</span><span style="color:#999999;">(</span><span style="color:#B07D48;">item</span><span style="color:#999999;">))</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#B07D48;">opath</span><span style="color:#999999;">.</span><span style="color:#59873A;">forEach</span><span style="color:#999999;">(</span><span style="color:#B07D48;">item</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">item</span><span style="color:#999999;">.</span><span style="color:#59873A;">forEach</span><span style="color:#999999;">((</span><span style="color:#B07D48;">p</span><span style="color:#999999;">,</span><span style="color:#B07D48;">i</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">i</span><span style="color:#393A34;"> </span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">                </span><span style="color:#B07D48;">item</span><span style="color:#393A34;"> </span><span style="color:#999999;">[</span><span style="color:#B07D48;">i</span><span style="color:#999999;">]</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">item</span><span style="color:#999999;">[</span><span style="color:#B07D48;">i</span><span style="color:#999999;">]</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">/</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">3</span><span style="color:#393A34;">  </span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">keyShape</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">group</span><span style="color:#999999;">.</span><span style="color:#59873A;">addShape</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">path</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#998418;">attrs</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#999999;">...</span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">.</span><span style="color:#B07D48;">style</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">width</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">.</span><span style="color:#B07D48;">style</span><span style="color:#999999;">.</span><span style="color:#B07D48;">width</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">height</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">.</span><span style="color:#B07D48;">style</span><span style="color:#999999;">.</span><span style="color:#B07D48;">height</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">path</span><span style="color:#999999;">:</span><span style="color:#393A34;">  </span><span style="color:#B07D48;">opath</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#998418;">id</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">.</span><span style="color:#B07D48;">id</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">cloud</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#B07D48;">group</span><span style="color:#999999;">.</span><span style="color:#59873A;">addShape</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">text</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#998418;">attrs</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">x</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">y</span><span style="color:#999999;">:</span><span style="color:#393A34;">  </span><span style="color:#AB5959;">-</span><span style="color:#2F798A;">100</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">textAlign</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">center</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">text</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">cfg</span><span style="color:#999999;">.</span><span style="color:#B07D48;">label</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">              </span><span style="color:#998418;">fill</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">#303133</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">hubCombo-label</span><span style="color:#B5695999;">&quot;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">keyShape</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">        </span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B5695999;">&quot;</span><span style="color:#B56959;">single-combo</span><span style="color:#B5695999;">&quot;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">   </span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;"> </span><span style="color:#A0ADA0;">//节点文本溢出省略处理</span></span>
<span class="line"><span style="color:#393A34;"> </span><span style="color:#1E754F;">export</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#59873A;">fittingString</span><span style="color:#999999;">(</span><span style="color:#B07D48;">str</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">maxWidth</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">fontSize</span><span style="color:#999999;">){</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">ellipsis</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">...</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">ellipsisLength</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">G6</span><span style="color:#999999;">.</span><span style="color:#B07D48;">Util</span><span style="color:#999999;">.</span><span style="color:#59873A;">getTextSize</span><span style="color:#999999;">(</span><span style="color:#B07D48;">ellipsis</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">fontSize</span><span style="color:#999999;">)[</span><span style="color:#2F798A;">0</span><span style="color:#999999;">];</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">currentWidth</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">res</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">str</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">pattern</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">RegExp</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">[</span><span style="color:#A65E2B;">\\u4E00</span><span style="color:#B56959;">-</span><span style="color:#A65E2B;">\\u9FA5</span><span style="color:#B56959;">]+</span><span style="color:#B5695999;">&#39;</span><span style="color:#999999;">);</span><span style="color:#393A34;">  </span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B07D48;">str</span><span style="color:#999999;">.</span><span style="color:#59873A;">split</span><span style="color:#999999;">(</span><span style="color:#B5695999;">&#39;&#39;</span><span style="color:#999999;">).</span><span style="color:#59873A;">forEach</span><span style="color:#999999;">((</span><span style="color:#B07D48;">letter</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">i</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">currentWidth</span><span style="color:#393A34;"> </span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">maxWidth</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">ellipsisLength</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">return</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">pattern</span><span style="color:#999999;">.</span><span style="color:#59873A;">test</span><span style="color:#999999;">(</span><span style="color:#B07D48;">letter</span><span style="color:#999999;">))</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">currentWidth</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">fontSize</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">else</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">currentWidth</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">G6</span><span style="color:#999999;">.</span><span style="color:#B07D48;">Util</span><span style="color:#999999;">.</span><span style="color:#59873A;">getLetterWidth</span><span style="color:#999999;">(</span><span style="color:#B07D48;">letter</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">fontSize</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">currentWidth</span><span style="color:#393A34;"> </span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">maxWidth</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">ellipsisLength</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">res</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">\`</span><span style="color:#999999;">\${</span><span style="color:#B56959;">str</span><span style="color:#999999;">.</span><span style="color:#59873A;">substr</span><span style="color:#999999;">(</span><span style="color:#2F798A;">0</span><span style="color:#999999;">,</span><span style="color:#B56959;"> i</span><span style="color:#999999;">)</span><span style="color:#999999;">}\${</span><span style="color:#B56959;">ellipsis</span><span style="color:#999999;">}</span><span style="color:#B5695999;">\`</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">});</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">res</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#999999;">}</span></span></code></pre></div>`,6),e=[o];function t(c,r,y,A,D,B){return n(),a("div",null,e)}const C=s(p,[["render",t]]);export{E as __pageData,C as default};
